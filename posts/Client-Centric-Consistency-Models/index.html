<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="content-language" content="en" />
    <link rel="icon" href="/favicon.ico" />
    <title>Client-Centric Consistency Models</title>
    <meta name="og:title" content="Client-Centric Consistency Models" />
    <meta name="author" content="Gao" />
    <meta
      name="keywords"
      content="Client-Centric Consistency Models,Monotonic Reads,Monotonic Writes,Read Your Writes,Writes Follow Reads"
    />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="next-head-count" content="10" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
      integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
      integrity="sha512-c42qTSw/wPZ3/5LBzD+Bw5f7bSF2oxou6wEb+I/lqeaKV5FDIfMvvRp772y4jcJLKuGUOpbJMdg/BTl50fJYAw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css"
      integrity="sha384-ZPe7yZ91iWxYumsBEOn7ieg8q/o+qh/hQpSaPow8T6BwALcXSCS6C6fSRPIAnTQs"
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css"
      integrity="sha512-hasIneQUHlh06VNBe7f6ZcHmeRTLIaQWFd43YriJ0UND19bvYRauxthDg8E4eVNPm9bRUhr5JGeqH7FRFXQu5g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="preload"
      href="/_next/static/css/b03d983dbf205dad.css"
      as="style"
    />
    <link
      rel="stylesheet"
      href="/_next/static/css/b03d983dbf205dad.css"
      data-n-g=""
    />
    <link
      rel="preload"
      href="/_next/static/css/f2f580b8a013fccf.css"
      as="style"
    />
    <link
      rel="stylesheet"
      href="/_next/static/css/f2f580b8a013fccf.css"
      data-n-p=""
    />
    <noscript data-n-css=""></noscript>
    <script
      defer=""
      nomodule=""
      src="/_next/static/chunks/polyfills-42372ed130431b0a.js"
    ></script>
    <script
      src="/_next/static/chunks/webpack-b8f8d6679aaa5f42.js"
      defer=""
    ></script>
    <script
      src="/_next/static/chunks/framework-49c6cecf1f6d5795.js"
      defer=""
    ></script>
    <script
      src="/_next/static/chunks/main-78a206356629e049.js"
      defer=""
    ></script>
    <script
      src="/_next/static/chunks/pages/_app-4103696f59b676b9.js"
      defer=""
    ></script>
    <script
      src="/_next/static/chunks/470-88ca63604181d961.js"
      defer=""
    ></script>
    <script
      src="/_next/static/chunks/287-15331c4732f63f37.js"
      defer=""
    ></script>
    <script
      src="/_next/static/chunks/pages/posts/%5Bslug%5D-e7a2f8c290316fd0.js"
      defer=""
    ></script>
    <script src="/_next/static/fixed/_buildManifest.js" defer=""></script>
    <script src="/_next/static/fixed/_ssgManifest.js" defer=""></script>
  </head>
  <body>
    <div id="__next">
      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
        crossorigin="anonymous"
      />
      <nav
        class="navbar navbar-expand-md navbar-light sticky-top NavigationBar_navBar__fSiIq tw-bg-white/95 tw-shadow tw-shadow-black/25"
      >
        <div class="container-fluid px-md-5">
          <div class="navbar-brand animate__animated animate__pulse">
            <span
              class="tw-rounded tw-bg-black tw-p-1 tw-text-xl tw-font-medium tw-text-white"
              >Gao&#x27;s blog</span
            >
          </div>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="navbar-collapse collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mb-2 mb-lg-0 ms-auto">
              <li class="nav-item">
                <a
                  class="nav-link active"
                  aria-current="page"
                  href="/posts/langs/en/"
                  >Home</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  aria-current="page"
                  href="/posts/langs/en/tags/"
                  >Tags</a
                >
              </li>
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                  >Language</a
                >
                <ul class="dropdown-menu dropdown-menu-end">
                  <li>
                    <a class="dropdown-item" href="/posts/langs/en/">English</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="/posts/langs/es/">Spanish</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="/posts/langs/zh/">Chinese</a>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <header
        class="tw-flex tw-h-96 tw-w-screen tw-flex-col tw-content-center tw-justify-center tw-bg-cover tw-bg-center tw-bg-no-repeat tw-text-center tw-text-white"
        style="
          background-image: url(/_next/static/media/default-post-preview.c96b099a.jpeg);
        "
      >
        <h1>Client-Centric Consistency Models</h1>
        <p>Author: Gao</p>
        <span
          ><i class="fa-regular fa-calendar"></i
          ><time class="tw-pl-1.5" datetime="2021-07-03 15:06:02"
            >July 3, 2021</time
          ></span
        >
        <section class="tw-mt-3 tw-text-center">
          <p>Tags<!-- -->:</p>
          <ul class="tw-p-0">
            <li class="tw-inline tw-px-1">
              <a
                class="PostTags_tag__3LUVs tw-border-white tw-text-white"
                href="/posts/langs/en/tags/Client-Centric%20Consistency%20Models/"
                >Client-Centric Consistency Models</a
              >
            </li>
            <li class="tw-inline tw-px-1">
              <a
                class="PostTags_tag__3LUVs tw-border-white tw-text-white"
                href="/posts/langs/en/tags/Monotonic%20Reads/"
                >Monotonic Reads</a
              >
            </li>
            <li class="tw-inline tw-px-1">
              <a
                class="PostTags_tag__3LUVs tw-border-white tw-text-white"
                href="/posts/langs/en/tags/Monotonic%20Writes/"
                >Monotonic Writes</a
              >
            </li>
            <li class="tw-inline tw-px-1">
              <a
                class="PostTags_tag__3LUVs tw-border-white tw-text-white"
                href="/posts/langs/en/tags/Read%20Your%20Writes/"
                >Read Your Writes</a
              >
            </li>
            <li class="tw-inline tw-px-1">
              <a
                class="PostTags_tag__3LUVs tw-border-white tw-text-white"
                href="/posts/langs/en/tags/Writes%20Follow%20Reads/"
                >Writes Follow Reads</a
              >
            </li>
          </ul>
        </section>
      </header>
      <div class="tw-mx-auto tw-w-11/12">
        <main>
          <article>
            <iframe
              title="Client-Centric-Consistency-Models"
              src="/Client-Centric-Consistency-Models/index.html"
              width="100%"
              height="0px"
            ></iframe>
          </article>
        </main>
        <aside></aside>
      </div>
      <footer class="tw-text-center tw-text-gray-400">
        <div class="row justify-content-center">
          <ul class="list-inline text-center tw-text-stone-700">
            <li class="list-inline-item">
              <a
                class="tw-text-stone-700"
                target="_blank"
                href="https://www.linkedin.com/in/shuxig"
                ><span class="fa-stack fa-lg"
                  ><i class="fa fa-circle fa-stack-2x"></i
                  ><i
                    class="fab fa-linkedin-in fa-stack-1x fa-inverse"
                  ></i></span
              ></a>
            </li>
            <li class="list-inline-item">
              <a
                class="tw-text-stone-700"
                target="_blank"
                href="mailto:dalao1002@gmail.com?subject=From my blog&amp;body=Hi,I found this website very useful"
                ><span class="fa-stack fa-lg"
                  ><i class="fa fa-circle fa-stack-2x"></i
                  ><i class="fas fa-envelope fa-stack-1x fa-inverse"></i></span
              ></a>
            </li>
            <li class="list-inline-item">
              <a
                class="tw-text-stone-700"
                target="_blank"
                href="https://github.com/vitaminac"
                ><span class="fa-stack fa-lg"
                  ><i class="fa fa-circle fa-stack-2x"></i
                  ><i class="fab fa-github fa-stack-1x fa-inverse"></i></span
              ></a>
            </li>
            <li class="list-inline-item">
              <a
                class="tw-text-stone-700"
                target="_blank"
                href="https://gist.github.com/vitaminac"
                ><span class="fa-stack fa-lg"
                  ><i class="fa fa-circle fa-stack-2x"></i
                  ><i
                    class="fab fa-github-square fa-stack-1x fa-inverse"
                  ></i></span
              ></a>
            </li>
            <li class="list-inline-item">
              <a
                class="tw-text-stone-700"
                target="_blank"
                href="https://gitlab.com/vitaminac"
                ><span class="fa-stack fa-lg"
                  ><i class="fa fa-circle fa-stack-2x"></i
                  ><i class="fab fa-gitlab fa-stack-1x fa-inverse"></i></span
              ></a>
            </li>
            <li class="list-inline-item">
              <a
                class="tw-text-stone-700"
                target="_blank"
                href="https://www.kaggle.com/dalao1002"
                ><span class="fa-stack fa-lg"
                  ><i class="fa fa-circle fa-stack-2x"></i
                  ><i class="fab fa-kaggle fa-stack-1x fa-inverse"></i></span
              ></a>
            </li>
            <li class="list-inline-item">
              <a
                class="tw-text-stone-700"
                target="_blank"
                href="https://leetcode.com/dalao1002"
                ><span class="fa-stack fa-lg"
                  ><i class="fa fa-circle fa-stack-2x"></i
                  ><i class="fas fa-code fa-stack-1x fa-inverse"></i></span
              ></a>
            </li>
            <li class="list-inline-item">
              <a
                class="tw-text-stone-700"
                target="_blank"
                href="https://stackoverflow.com/users/9980245"
                ><span class="fa-stack fa-lg"
                  ><i class="fa fa-circle fa-stack-2x"></i
                  ><i
                    class="fab fa-stack-overflow fa-stack-1x fa-inverse"
                  ></i></span
              ></a>
            </li>
          </ul>
        </div>
        <img
          alt="QR"
          loading="lazy"
          width="1710"
          height="624"
          decoding="async"
          data-nimg="1"
          class="tw-mx-auto tw-max-w-full tw-object-contain tw-object-center lg:tw-max-w-xl"
          style="
            color: transparent;
            background-size: cover;
            background-position: 50% 50%;
            background-repeat: no-repeat;
            background-image: url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 320 120&#x27;%3E%3Cfilter id=&#x27;b&#x27; color-interpolation-filters=&#x27;sRGB&#x27;%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3CfeColorMatrix values=&#x27;1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1&#x27; result=&#x27;s&#x27;/%3E%3CfeFlood x=&#x27;0&#x27; y=&#x27;0&#x27; width=&#x27;100%25&#x27; height=&#x27;100%25&#x27;/%3E%3CfeComposite operator=&#x27;out&#x27; in=&#x27;s&#x27;/%3E%3CfeComposite in2=&#x27;SourceGraphic&#x27;/%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3C/filter%3E%3Cimage width=&#x27;100%25&#x27; height=&#x27;100%25&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; preserveAspectRatio=&#x27;none&#x27; style=&#x27;filter: url(%23b);&#x27; href=&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAIAAAAhqtkfAAAAVklEQVR42gFLALT/AKrStMHRxZXRpW3NilHIekDGcw/CYyjCZwC/z8LTwcan0LKu37rI48+228C838WZ16oApdSxvdPCi86doNmvx+LNu9vDx+LOn9muCIkyTVum2sgAAAAASUVORK5CYII=&#x27;/%3E%3C/svg%3E&quot;);
          "
          src="/_next/static/media/QR.b48259ea.png"
        />
        <p>Copyright Â© Gao&#x27;s blog 2024</p>
      </footer>
    </div>
    <script id="__NEXT_DATA__" type="application/json">
      {
        "props": {
          "pageProps": {
            "postData": {
              "title": "Client-Centric Consistency Models",
              "markdownContentSource": "\n## Eventual consistency\n\nThere is a special class of distributed data stores that characterized by the **lack of simultaneous updates**, most of the operations involve reading data. These data stores offers a very **weak consistency model**, called **eventual consistency**. Eventually consistency means in the absence of updates all replicas converge toward identical copies. Eventual consistency essentially requires only that updates are guaranteed to propagate to all replicas. It is often acceptable to propagate an update after some time, and then the question is how fast updates should be made available to read-only processes. Concurrent update are often relatively easy to solve when **assuming that only a small group of processes can perform updates**. Eventual consistency is therefore often **cheap to implement**.\n\n## Client-centric consistency models\n\nEventual consistent data stores work fine **as long as clients always access the same replica**. However, problems arise when different replicas are accessed over a short period of time. Assume the user performs several update operations and then disconnects again. Later, he accesses the database again, possibly after moving to a different location or by using a different access device. At that point, the user may be connected to a different replica than before. If the updates performed previously have not yet been propagated, the user will notice inconsistent behavior. In particular, he would expect to see all previously made changes, but instead, it appears as if nothing at all has happened.\n\nBy introducing special client-centric consistency models, the previous problem can be alleviated in a relatively cheap way. In essence, client-centric consistency provides guarantees for a **single client**.\n\nTo explain these models, we consider a data store that is physically distributed across multiple machines. When a process accesses the data store, it generally connects to the nearest available copy, although any copy will be possible. All read and write operations are performed on that local copy. Updates are eventually propagated to the other copies. To simplify matters, we assume that data items have an associated owner, which is the only process that is permitted to modify that item. In this way, we avoid write-write conflicts.\n\n### Notation\n\nLet $x_i[t]$ denote the version of data item x at local copy $L_i$ at time $t$. $x_i[t]$ is the result of a series of write operations denoted as $WS(x_i[t])$ at $L_i$ that took place since initialization until time $t$. If the same operations have been replicated at local copy $L_j$ at a later time $t_2$, we write $WS(x_i[t_i];x_j[t_2])$. If the ordering of operations or the timing is clear from the context, the time index will be omitted.\n\n### Monotonic Reads\n\nIn a **monotonic-read consistent** data store, if a process reads the value of a data item x, any successive read operation on x by that process will always return that same value or a more recent value.\n\nAs an example where monotonic reads are useful, consider a distributed email database, when a user open mailbox in San Francisco and notice a new email is present. When the user later flies to New York and opens his mailbox again, monotonic-read consistency guarantees that the messages that were in the mailbox in San Francisco will also be in the mailbox when it is opened in New York.\n\n![Monotonic reads examples](monotonic-reads.png)\n\nIn the figure (a), process $P$ first performs a read operation on $x$ at $L_1$ shown as $R(x_1)$, returning the value of $x_1$. This value results from the write operations $WS(x_1)$ performed at $L_1$. Later, $P$ performs a read operation on $x$ at $L_2$, shown as $R(x_2)$. To guarantee monotonic-read consistency, all operations in $W(x_1)$ should have been propagated to $L_2$ before the second read operation takes place. In other words, we need to know for sure that $WS(x_1)$ is part of $WS(x_2)$, which is expressed as $WS(x_1;x_2)$.\n\nIn the figure (b), shows a situation in which monotonic-read consistency is not guaranteed. After process $P$ has read $x_1$ at $L_1$. it later performs the operation $R(x_2)$ at $L_2$. However, only the write operations $WS(x_2)$ have been performed at $L_2$. No guarantees are given that this set also contains all operations contained in $WS(x_1)$.\n\n### Monotonic Writes\n\nIn a **monotonic-write consistent** data store, a write operation by a process on a data item $x$ is completed before any successive write operation on x by the same process. In other words, no matter where that operation was initialized, for each node the new write of same process must wait for old write propagate to local copy.\n\n![Monotonic writes example](monotonic-writes.png)\n\nIn the figure (a), a process $P$ performs a write operation on $x$ at local copy $L_1$. Later, $P$ performs another write operation on $x$, but this time at $L_2$. To ensure monotonic-write consistency, it is necessary that the previous write operation at $L_1$ has already been propagated to $L_1$. This is why we have $W(x_1)$ at $L_2$ and before $W(x_2)$.\n\nIn the figure (b), in which monotonic-write consistency is not guaranteed. What is missing is the propagation of $W(x_1)$ to copy $L_2$. By the definition of monotonic-write consistency, write operations by the same process are performed in the same order as they are initialized.\n\n### Read Your Writes\n\nIn a **read-your-writes consistent** data store, the effect of a write operation by a process on data item $x$ will always be seen by a successive read operation on $x$ by the same process. In other words, a write operation is always completed before a successive read operation by the same process, no matter where that read operation takes place.\n\nRead your writes consistency is useful when updating web documents and subsequently viewing the effects.\n\n![Read your writes](read-your-writes.png)\n\nIn the figure (a), process $P$ performed a write operation $W(x_1)$ and later a read operation at a different local copy. Read-your-writes consistency guarantees that the effects of the write operation can be seen by the succeeding read operation. This is expressed by $W(x_1;x_2)$, which states that $W(x_1)$ is part of $WS(x_2)$\n\nIn the figure (b) $W(x_1)$ has been left out of $WS(x_2)$, meaning that the effects of the previous write operation by process $P$ have not been propagated to $L_2$.\n\n### Writes Follow Reads\n\nIn a **writes-follow-reads consistent** data store, a write operation by a process on a data item $x$ following a previous read operation on $x$ by the same process is guaranteed to take place on the same or a more recent value of $x$ that was read. In other words, any successive write opeartion by a process on a data item will be performed on a copy of $x$ that is up to date with the value most recently read by that process.\n\nWrites-follow-reads consistency can be used to guarantee that user can only post a reaction to an article only after they have seen the original article.\n\n![Writes follow reads](writes-follow-reads.png)\n\nIn the figure (a), a process reads $x$ at local copy $L_1$ and the value is also propagates to $L_2$, where the same process later performs a write operation.\n\nIn the figure (b), no guarantees are given that the operation performed at $L_2$, because the write operation is performed on a copy that doesn't receive the update that is on the $L_1$.\n\n### Reference\n\n* Distributed Systems: Principles and Paradigms 2nd edition, pag.288-295\n",
              "slug": "Client-Centric-Consistency-Models",
              "date": "2021-07-03 15:06:02",
              "lang": "en",
              "tags": [
                "Client-Centric Consistency Models",
                "Monotonic Reads",
                "Monotonic Writes",
                "Read Your Writes",
                "Writes Follow Reads"
              ],
              "path": "/Client-Centric-Consistency-Models/index.html"
            },
            "lang": "en",
            "_nextI18Next": {
              "initialI18nStore": {
                "en": {
                  "navbar": {
                    "Home": "Home",
                    "Language": "Language",
                    "Tags": "Tags",
                    "en": "English",
                    "es": "Spanish",
                    "zh": "Chinese"
                  },
                  "post-layout": {
                    "Author": "Author: {{author}}",
                    "Tags": "Tags"
                  }
                }
              },
              "initialLocale": "en",
              "ns": ["navbar", "post-layout"],
              "userConfig": {
                "i18n": {
                  "defaultLocale": "en",
                  "locales": ["en", "es", "zh"]
                },
                "default": {
                  "i18n": {
                    "defaultLocale": "en",
                    "locales": ["en", "es", "zh"]
                  }
                }
              }
            }
          },
          "__N_SSG": true
        },
        "page": "/posts/[slug]",
        "query": { "slug": "Client-Centric-Consistency-Models" },
        "buildId": "fixed",
        "isFallback": false,
        "gsp": true,
        "scriptLoader": []
      }
    </script>
  </body>
</html>
