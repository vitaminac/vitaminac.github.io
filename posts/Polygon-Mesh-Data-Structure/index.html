<!doctype html>
<html lang="zh">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="content-language" content="zh" />
    <link rel="icon" href="/favicon.ico" />
    <title>计算机图形数据结构</title>
    <meta name="og:title" content="计算机图形数据结构" />
    <meta name="author" content="Gao" />
    <meta name="keywords" content="计算机图形,三角网格,向量,几何,图形结构" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="next-head-count" content="10" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
      integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
      integrity="sha512-c42qTSw/wPZ3/5LBzD+Bw5f7bSF2oxou6wEb+I/lqeaKV5FDIfMvvRp772y4jcJLKuGUOpbJMdg/BTl50fJYAw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css"
      integrity="sha384-ZPe7yZ91iWxYumsBEOn7ieg8q/o+qh/hQpSaPow8T6BwALcXSCS6C6fSRPIAnTQs"
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css"
      integrity="sha512-hasIneQUHlh06VNBe7f6ZcHmeRTLIaQWFd43YriJ0UND19bvYRauxthDg8E4eVNPm9bRUhr5JGeqH7FRFXQu5g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="preload"
      href="/_next/static/css/b03d983dbf205dad.css"
      as="style"
    />
    <link
      rel="stylesheet"
      href="/_next/static/css/b03d983dbf205dad.css"
      data-n-g=""
    />
    <link
      rel="preload"
      href="/_next/static/css/f7c7169dc43ab236.css"
      as="style"
    />
    <link
      rel="stylesheet"
      href="/_next/static/css/f7c7169dc43ab236.css"
      data-n-p=""
    />
    <noscript data-n-css=""></noscript>
    <script
      defer=""
      nomodule=""
      src="/_next/static/chunks/polyfills-42372ed130431b0a.js"
    ></script>
    <script
      src="/_next/static/chunks/webpack-b8f8d6679aaa5f42.js"
      defer=""
    ></script>
    <script
      src="/_next/static/chunks/framework-49c6cecf1f6d5795.js"
      defer=""
    ></script>
    <script
      src="/_next/static/chunks/main-78a206356629e049.js"
      defer=""
    ></script>
    <script
      src="/_next/static/chunks/pages/_app-4103696f59b676b9.js"
      defer=""
    ></script>
    <script
      src="/_next/static/chunks/470-88ca63604181d961.js"
      defer=""
    ></script>
    <script
      src="/_next/static/chunks/287-15331c4732f63f37.js"
      defer=""
    ></script>
    <script
      src="/_next/static/chunks/pages/posts/%5Bslug%5D-b2e1f70da9b1d978.js"
      defer=""
    ></script>
    <script src="/_next/static/fixed/_buildManifest.js" defer=""></script>
    <script src="/_next/static/fixed/_ssgManifest.js" defer=""></script>
  </head>
  <body>
    <div id="__next">
      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
        crossorigin="anonymous"
      />
      <nav
        class="navbar navbar-expand-md navbar-light sticky-top NavigationBar_navBar__fSiIq tw-bg-white/95 tw-shadow tw-shadow-black/25"
      >
        <div class="container-fluid px-md-5">
          <div class="navbar-brand animate__animated animate__pulse">
            <span
              class="tw-rounded tw-bg-black tw-p-1 tw-text-xl tw-font-medium tw-text-white"
              >Gao&#x27;s blog</span
            >
          </div>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="navbar-collapse collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mb-2 mb-lg-0 ms-auto">
              <li class="nav-item">
                <a
                  class="nav-link active"
                  aria-current="page"
                  href="/posts/langs/zh/"
                  >主页</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  aria-current="page"
                  href="/posts/langs/zh/tags/"
                  >标签</a
                >
              </li>
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                  >语言</a
                >
                <ul class="dropdown-menu dropdown-menu-end">
                  <li>
                    <a class="dropdown-item" href="/posts/langs/en/">英语</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="/posts/langs/es/">西语</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="/posts/langs/zh/">中文</a>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <header
        class="tw-flex tw-h-96 tw-w-screen tw-flex-col tw-content-center tw-justify-center tw-bg-cover tw-bg-center tw-bg-no-repeat tw-text-center tw-text-white"
        style="
          background-image: url(/_next/static/media/default-post-preview.c96b099a.jpeg);
        "
      >
        <h1>计算机图形数据结构</h1>
        <span>作者: Gao</span
        ><span
          ><i class="fa-regular fa-calendar"></i
          ><time class="tw-pl-1.5" datetime="2018-11-11 22:14:47"
            >November 11, 2018</time
          ></span
        >
        <section class="FeaturesTags_tags__qev0a tw-text-center">
          <h6>标签</h6>
          <ul class="tw-p-0">
            <li class="tw-inline tw-px-1">
              <a
                class="FeaturesTags_tag__f8Svr tw-border-white tw-text-white"
                href="/posts/langs/zh/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2/"
                >计算机图形</a
              >
            </li>
            <li class="tw-inline tw-px-1">
              <a
                class="FeaturesTags_tag__f8Svr tw-border-white tw-text-white"
                href="/posts/langs/zh/tags/%E4%B8%89%E8%A7%92%E7%BD%91%E6%A0%BC/"
                >三角网格</a
              >
            </li>
            <li class="tw-inline tw-px-1">
              <a
                class="FeaturesTags_tag__f8Svr tw-border-white tw-text-white"
                href="/posts/langs/zh/tags/%E5%90%91%E9%87%8F/"
                >向量</a
              >
            </li>
            <li class="tw-inline tw-px-1">
              <a
                class="FeaturesTags_tag__f8Svr tw-border-white tw-text-white"
                href="/posts/langs/zh/tags/%E5%87%A0%E4%BD%95/"
                >几何</a
              >
            </li>
            <li class="tw-inline tw-px-1">
              <a
                class="FeaturesTags_tag__f8Svr tw-border-white tw-text-white"
                href="/posts/langs/zh/tags/%E5%9B%BE%E5%BD%A2%E7%BB%93%E6%9E%84/"
                >图形结构</a
              >
            </li>
          </ul>
        </section>
      </header>
      <div class="tw-mx-auto tw-w-11/12">
        <main>
          <article>
            <iframe
              title="Polygon-Mesh-Data-Structure"
              src="/Polygon-Mesh-Data-Structure/index.html"
              width="100%"
              height="0px"
            ></iframe>
          </article>
        </main>
        <aside></aside>
      </div>
      <footer class="tw-text-center tw-text-gray-400">
        <div class="row justify-content-center">
          <ul class="list-inline text-center tw-text-stone-700">
            <li class="list-inline-item">
              <a
                class="tw-text-stone-700"
                target="_blank"
                href="https://www.linkedin.com/in/shuxig"
                ><span class="fa-stack fa-lg"
                  ><i class="fa fa-circle fa-stack-2x"></i
                  ><i
                    class="fab fa-linkedin-in fa-stack-1x fa-inverse"
                  ></i></span
              ></a>
            </li>
            <li class="list-inline-item">
              <a
                class="tw-text-stone-700"
                target="_blank"
                href="mailto:dalao1002@gmail.com?subject=From my blog&amp;body=Hi,I found this website very useful"
                ><span class="fa-stack fa-lg"
                  ><i class="fa fa-circle fa-stack-2x"></i
                  ><i class="fas fa-envelope fa-stack-1x fa-inverse"></i></span
              ></a>
            </li>
            <li class="list-inline-item">
              <a
                class="tw-text-stone-700"
                target="_blank"
                href="https://github.com/vitaminac"
                ><span class="fa-stack fa-lg"
                  ><i class="fa fa-circle fa-stack-2x"></i
                  ><i class="fab fa-github fa-stack-1x fa-inverse"></i></span
              ></a>
            </li>
            <li class="list-inline-item">
              <a
                class="tw-text-stone-700"
                target="_blank"
                href="https://gist.github.com/vitaminac"
                ><span class="fa-stack fa-lg"
                  ><i class="fa fa-circle fa-stack-2x"></i
                  ><i
                    class="fab fa-github-square fa-stack-1x fa-inverse"
                  ></i></span
              ></a>
            </li>
            <li class="list-inline-item">
              <a
                class="tw-text-stone-700"
                target="_blank"
                href="https://gitlab.com/vitaminac"
                ><span class="fa-stack fa-lg"
                  ><i class="fa fa-circle fa-stack-2x"></i
                  ><i class="fab fa-gitlab fa-stack-1x fa-inverse"></i></span
              ></a>
            </li>
            <li class="list-inline-item">
              <a
                class="tw-text-stone-700"
                target="_blank"
                href="https://www.kaggle.com/dalao1002"
                ><span class="fa-stack fa-lg"
                  ><i class="fa fa-circle fa-stack-2x"></i
                  ><i class="fab fa-kaggle fa-stack-1x fa-inverse"></i></span
              ></a>
            </li>
            <li class="list-inline-item">
              <a
                class="tw-text-stone-700"
                target="_blank"
                href="https://leetcode.com/dalao1002"
                ><span class="fa-stack fa-lg"
                  ><i class="fa fa-circle fa-stack-2x"></i
                  ><i class="fas fa-code fa-stack-1x fa-inverse"></i></span
              ></a>
            </li>
            <li class="list-inline-item">
              <a
                class="tw-text-stone-700"
                target="_blank"
                href="https://stackoverflow.com/users/9980245"
                ><span class="fa-stack fa-lg"
                  ><i class="fa fa-circle fa-stack-2x"></i
                  ><i
                    class="fab fa-stack-overflow fa-stack-1x fa-inverse"
                  ></i></span
              ></a>
            </li>
          </ul>
        </div>
        <img
          alt="QR"
          loading="lazy"
          width="1710"
          height="624"
          decoding="async"
          data-nimg="1"
          class="tw-mx-auto tw-max-w-full tw-object-contain tw-object-center lg:tw-max-w-xl"
          style="
            color: transparent;
            background-size: cover;
            background-position: 50% 50%;
            background-repeat: no-repeat;
            background-image: url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 320 120&#x27;%3E%3Cfilter id=&#x27;b&#x27; color-interpolation-filters=&#x27;sRGB&#x27;%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3CfeColorMatrix values=&#x27;1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1&#x27; result=&#x27;s&#x27;/%3E%3CfeFlood x=&#x27;0&#x27; y=&#x27;0&#x27; width=&#x27;100%25&#x27; height=&#x27;100%25&#x27;/%3E%3CfeComposite operator=&#x27;out&#x27; in=&#x27;s&#x27;/%3E%3CfeComposite in2=&#x27;SourceGraphic&#x27;/%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3C/filter%3E%3Cimage width=&#x27;100%25&#x27; height=&#x27;100%25&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; preserveAspectRatio=&#x27;none&#x27; style=&#x27;filter: url(%23b);&#x27; href=&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAIAAAAhqtkfAAAAVklEQVR42gFLALT/AKrStMHRxZXRpW3NilHIekDGcw/CYyjCZwC/z8LTwcan0LKu37rI48+228C838WZ16oApdSxvdPCi86doNmvx+LNu9vDx+LOn9muCIkyTVum2sgAAAAASUVORK5CYII=&#x27;/%3E%3C/svg%3E&quot;);
          "
          src="/_next/static/media/QR.b48259ea.png"
        />
        <p>Copyright © Gao&#x27;s blog 2024</p>
      </footer>
    </div>
    <script id="__NEXT_DATA__" type="application/json">
      {
        "props": {
          "pageProps": {
            "postData": {
              "title": "计算机图形数据结构",
              "markdownContentSource": "\n# 向量\n\n定义:具有大小同时也代表方向的量. 他是几何空间概念中形成的一个抽象的概念. 我们可以用它表示一个三维空间的对象, 例如一个点. \n\n## 坐标\n\n在笛卡尔坐标系下我们使用三个坐标值代表一个向量, \\\\(\\(x, y, z\\)\\\\). \n![三维向量](coordinate.png)\n\n在计算机中我们可以用一个有三个坐标的类表示并储存向量, 每个坐标都用双精度浮点数来表示.\n在 ***vec3.h*** 中, 我定义了个类Vec3用来代表三维向量.\n\n    class Vec3 {\n    public:\n        double x;\n        double y;\n        double z;\n        inline Vec3(const double x, const double y, const double z) : x(x), y(y), z(z)\n        {\n        }\n    };\n\n为了方便以后调试我加了下面的方法把向量打印出来\n\n    ostream\u0026 operator\u003c\u003c(ostream\u0026 out, const Vec3\u0026 v)\n    {\n        out \u003c\u003c \"(\" \u003c\u003c v.x \u003c\u003c \",\" \u003c\u003c v.y \u003c\u003c \",\" \u003c\u003c v.z \u003c\u003c \")\";\n        return out;\n    }\n\n### 创建向量-测试\n\n    #include \"vec3.h\"\n\n    int main() {\n        auto v = Vec3(1.0, 2.0, 3.0);\n        std::cout \u003c\u003c v \u003c\u003c std::endl;\n    }\n\n### 创建向量-输出\n\n(1,2,3)\n\n## 模(向量的大小)\n\n在三维笛卡尔坐标系下的向量$\\vec{a}=(x,y,z)$, \n其模长为 $\\lVert \\vec{a} \\rVert=\\sqrt{x^2+y^2+z^2}$\n\n### 模-实现\n\n    double Vec3::module2() const {\n        return this-\u003ex*this-\u003ex + this-\u003ey*this-\u003ey + this-\u003ez*this-\u003ez;\n    }\n\n    double Vec3::module() const {\n        return sqrt(this-\u003emodule2());\n    }\n\n### 模-测试\n\n    std::cout \u003c\u003c \"The module of \" \u003c\u003c a \u003c\u003c \" is \" \u003c\u003c a.module() \u003c\u003c std::endl;\n\n### 模-输出\n\n    The module of (1,2,3) is 3.74166\n\n# 向量的基本运算\n\n向量有两个基本运算: 向量相加和标量乘法\n\n## 向量相加\n\n两个向量$\\vec{a}$和$\\vec{b}$相加会得到另一个向量, 并且具有以下特点, 封闭性, 交换律, 结合律, 零向量, 加法逆元.\n![向量相加](vector_sum.png)\n\n## 向量相减\n\n两个向量$\\vec{a}$和$\\vec{b}$的相减可以看成是加上了一个与$\\vec{b}$大小相等方向相反的向量.\n![向量相减](vector_sub.png)\n\n$$\\vec{a} + \\vec{b} = (a_i + b_i)\\vec{e}_i + (a_j + b_j)\\vec{e}_j + (a_k + b_k)\\vec{e}_k$$\n\n返回一个向量, 它的坐标值是两个向量的各个坐标值的相加或相减\n\n### 向量加减-实现\n\n    Vec3 Vec3::operator+(const Vec3\u0026 other) const {\n        return Vec3(this-\u003ex + other.x, this-\u003ey + other.y, this-\u003ez + other.z);\n    }\n\n    Vec3 Vec3::operator-(const Vec3\u0026 other) const {\n        return Vec3(this-\u003ex - other.x, this-\u003ey - other.y, this-\u003ez - other.z);\n    }\n\n### 向量加减-测试\n\n    auto a = Vec3(1.0, 2.0, 3.0);\n    auto b = Vec3(1.0, 3.0, 5.0);\n    std::cout \u003c\u003c a \u003c\u003c \"+\" \u003c\u003c b \u003c\u003c \"=\" \u003c\u003c a + b \u003c\u003c std::endl;\n    std::cout \u003c\u003c a \u003c\u003c \"-\" \u003c\u003c b \u003c\u003c \"=\" \u003c\u003c a - b \u003c\u003c std::endl;\n\n### 向量加减-输出\n\n    (1,2,3)+(1,3,5)=(2,5,8)\n    (1,2,3)-(1,3,5)=(0,-1,-2)\n\n## 标量乘法\n\n$k\\vec{v}$, 运算结果是对一个向量的拉伸, 如果k是负数得出的结果会是与$\\vec{v}$方向相反\n\n### 标量乘法-实现\n\n    Vec3 Vec3::operator*(double scalar) const {\n        return Vec3(this-\u003ex * scalar, this-\u003ey * scalar, this-\u003ez * scalar);\n    }\n\n    Vec3 operator*(double scalar, const Vec3 \u0026 vector) {\n        return Vec3(vector.x * scalar, vector.y * scalar, vector.z * scalar);\n    }\n\n### 标量乘法-测试\n\n    std::cout \u003c\u003c a \u003c\u003c \" per 3 is \" \u003c\u003c a * 3 \u003c\u003c std::endl;\n    std::cout \u003c\u003c \"3 per \" \u003c\u003c a \u003c\u003c \" is \" \u003c\u003c 3 * a \u003c\u003c std::endl;\n\n### 标量乘法-输出\n\n    (1,2,3) per 3 is (3,6,9)\n    3 per (1,2,3) is (3,6,9)\n\n## 零向量\n\n始点与终点重合, 大小为零的向量$\\vec{0}$\n\n### 零向量-定义\n\n    const Vec3 ZERO_VECTOR = Vec3(0, 0, 0);\n\n## 反向量\n\n一个向量$\\vec{v} (a, b, c)$的反向量$-\\vec{v} (-a, -b, -c)$与它大小相等但方向相反.\n\n### 反向量-实现\n\n    Vec3 Vec3::operator-() const {\n        return Vec3(-this-\u003ex, -this-\u003ey, -this-\u003ez);\n    }\n\n### 反向量-测试\n\n    std::cout \u003c\u003c \"The opposite of \" \u003c\u003c v \u003c\u003c \" is \" \u003c\u003c -v \u003c\u003c std::endl;\n\n### 反向量-输出\n\n    The opposite of (1,2,3) is (-1,-2,-3)\n\n## 单位向量\n\n单位向量$\\vec{u}$的任意向量$\\vec{a}$, 它的方向与$\\vec{a}$相同, 长度为1.\n$$ \\vec{u}=\\frac{\\vec{a}}{\\lVert \\vec{a} \\rVert} $$\n\n### 单位向量-实现\n\n    Vec3 Vec3::normalize() const {\n        double length = this-\u003emodule();\n        return Vec3(\n            this-\u003ex / length,\n            this-\u003ey / length,\n            this-\u003ez / length\n        );\n    }\n\n### 单位向量-测试\n\n    std::cout \u003c\u003c \"The unit vector of \" \u003c\u003c a \u003c\u003c \" is \" \u003c\u003c a.normalize() \u003c\u003c std::endl;\n\n### 单位向量-输出\n\n    The unit vector of (1,2,3) is (0.267261,0.534522,0.801784)\n\n# 向量的点积和叉积\n\n## 点积\n\n代数运算 $\\vec{a}*\\vec{b}=\\sum_{i=1}^{n}{a_i b_i}$.\n\n几何定义 $\\vec{a}*\\vec{b}=|\\vec{a}| |\\vec{v}| cos \\theta$.\n\n![点乘的几何意义](dot_product.png)\n\n### 点积-实现\n\n    double Vec3::operator*(const Vec3 \u0026 other) const {\n        return this-\u003ex * other.x + this-\u003ey * other.y + this-\u003ez * other.z;\n    }\n\n### 点积-测试\n\n    std::cout \u003c\u003c \"The dot product of \" \u003c\u003c a \u003c\u003c \" with \" \u003c\u003c b \u003c\u003c \" is \" \u003c\u003c a * b;\n\n### 点积-输出\n\n    The dot product of (1,2,3) with (1,3,5) is 22\n\n## 向量积(叉积)\n\n运算结果是个向量\n![向量积的几何意义](dot_product.png)\n\n计算方式\n\n$$\n\\vec{a} \\times \\vec{b} = \n\\begin{bmatrix}\n\\vec{i} \u0026 \\vec{j} \u0026 \\vec{k} \\\\\na_x     \u0026  a_y    \u0026 a_z     \\\\\nb_x     \u0026  b_y    \u0026 b_z     \\\\\n\\end{bmatrix}\\\\\na \\times b = (a_yb_z-a_zb_y)\\vec{i} - (a_xb_z-a_zb_x)\\vec{j} + (a_xb_y-a_yb_x)\\vec{k}\n$$\n\n### 向量积-实现\n\n    Vec3 Vec3::cross(const Vec3 \u0026 other) const {\n        return Vec3(\n            this-\u003ey * other.z - this-\u003ez * other.y,\n            -(this-\u003ex * other.z - this-\u003ez * other.x),\n            this-\u003ex*other.y - this-\u003ey*other.x\n        );\n    }\n\n### 向量积-测试\n\n    std::cout \u003c\u003c \"The cross product of \" \u003c\u003c a \u003c\u003c \" with \" \u003c\u003c b \u003c\u003c \" is \" \u003c\u003c a.cross(b) \u003c\u003c std::endl;\n    std::cout \u003c\u003c \"The cross product of \" \u003c\u003c b \u003c\u003c \" with \" \u003c\u003c a \u003c\u003c \" is \" \u003c\u003c b.cross(a) \u003c\u003c std::endl;\n\n### 向量积-输出\n\n    The cross product of (1,2,3) with (1,3,5) is (1,-2,1)\n    The cross product of (1,3,5) with (1,2,3) is (-1,2,-1)\n\n## 夹角\n\n$$\n\\arctan\n\\Bigg(\n\\frac\n{\n\\frac\n{\\lVert \\vec{u} \\times \\vec{v} \\rVert}\n{\\sqrt{(\\vec{u}*\\vec{u})*(\\vec{v}*\\vec{v})}}\n}\n{\n\\frac\n{\\vec{u} * \\vec{v}}\n{\\sqrt{(\\vec{u}*\\vec{u})*(\\vec{v}*\\vec{v})}} \n}\n\\Bigg)\n$$\n\n### 夹角-实现\n\n    double Vec3::includedAngle(Vec3 \u0026 v) const {\n        // compute |u| * |v|\n        double divisor = sqrt(this-\u003eoperator*(*this) * (v * v));\n        double cosine = this-\u003eoperator*(v) / divisor;\n        double sine = this-\u003ecross(v).module() / divisor;\n\n        return atan2(sine, cosine);\n    }\n\n### 夹角-测试\n\n    std::cout \u003c\u003c \"The angle between \" \u003c\u003c a \u003c\u003c \" and \" \u003c\u003c b \u003c\u003c \" is \" \u003c\u003c a.includedAngle(b) \u003c\u003c std::endl;\n\n\n### 夹角-输出\n\n    The angle between (1,2,3) and (1,3,5) is 0.110884\n\n# 三角网格\n\n三角网格是多边形网格(Mesh)的一种, 是一种在计算机图形中用来模拟物体表面的数据结构. 在计算机中现实世界的曲面是用大量的小三角形片去组成的. 由于多边形实际上也能细分成三角形, 所以使用三角网格(Triangle Mesh)是一种比较常见的情况.\n![三角网格](triangle_mesh.png)\n\n## 索引三角网格\n\n为了表示网格我们需要定义点和三角形的数据结构, \n点可以用向量, 三角形则保存三个点的索引\n\n    class Triangle {\n    public:\n        unsigned int a;\n        unsigned int b;\n        unsigned int c;\n\n        inline Triangle(unsigned int a, unsigned int b, unsigned int c) :a(a), b(b), c(c) {\n        }\n    };\n\n这些索引指向的是存储在网格中的顶点, 我们必须知道对应是哪个网格三角片才会具有意义.\n在网格中我们需要维护两个列表, 顶点表和三角形表\n\n    class TriangleMesh {\n    public:\n        std::vector\u003cVec3\u003e vertices;\n        std::vector\u003cTriangle\u003e faces;\n    };\n\n### 调试三角网格\n\n    std::ostream\u0026 operator \u003c\u003c (std::ostream \u0026 os, const Triangle\u0026 t) {\n        os \u003c\u003c \"the Triangle a:\" \u003c\u003c t.a \u003c\u003c \", b:\" \u003c\u003c t.b \u003c\u003c \", c: \" \u003c\u003c t.c;\n        return os;\n    }\n\n    std::ostream\u0026 operator \u003c\u003c (std::ostream \u0026 os, const TriangleMesh\u0026 mesh) {\n        os \u003c\u003c \"the mesh has \" \u003c\u003c mesh.vertices.size() \u003c\u003c \" vertices and \" \u003c\u003c mesh.faces.size() \u003c\u003c \" faces\" \u003c\u003c std::endl;\n        for (auto \u0026v : mesh.vertices) {\n            os \u003c\u003c v \u003c\u003c std::endl;\n        }\n        for (auto \u0026f : mesh.faces) {\n            os \u003c\u003c f \u003c\u003c std::endl;\n        }\n        return os;\n    }\n\n## 储存方式\n\n### .obj\n\n每一行代表一个点v或者面f\n\n    v 0.0624 0.03942 0.03357\n    v 0.0769 0.03909 0.03235\n    v 0.0569 0.03902 0.03239\n    v 0.0332 0.03602 0.03412\n\n    f 1 2 3\n    f 3 2 4\n    f 1 3 4 \n\n### .off\n\n[下载测试文件](16Triangles.off)\n第一行的头部数据是顶点, 面, 边的数量\n\n    OFF 4 3 6\n    0.0624 0.03942 0.03357\n    0.0769 0.03909 0.03235\n    0.0569 0.03902 0.03239\n    0.0332 0.03602 0.03412\n    3 0 1 2\n    3 2 1 3\n    3 0 2 3\n\n#### 解析.off文件\n\n    void TriangleMesh::importFromOff(std::istream \u0026is) {\n        std::string header;\n        // read header\n        if (!(is \u003e\u003e header))\n            throw std::string(\"error loading header\");\n\n        //Check if header ends with \"OFF\"\n        if (header.length() \u003c 3 || header.compare(header.length() - 3, 3, \"OFF\"))\n        {\n            std::cerr \u003c\u003c \"Header: \" \u003c\u003c header \u003c\u003c std::endl;\n            throw std::string(\"file is not in OFF file format.\");\n        }\n\n        // Read the number of vertex, faces, edges\n        unsigned int nv, nf, ne;\n        if (!(is \u003e\u003e nv \u003e\u003e nf \u003e\u003e ne)) {\n            throw std::string(\"error loading number of vertex, faces and edges\");\n        }\n\n        std::cerr \u003c\u003c \"vertex: \" \u003c\u003c nv \u003c\u003c \" faces: \" \u003c\u003c nf \u003c\u003c \" edges: \" \u003c\u003c ne \u003c\u003c std::endl;\n\n        this-\u003evertices.reserve(nv);\n        this-\u003efaces.reserve(nf);\n\n        // read the values of vertex\n        for (int i = 0; i \u003c nv; i++) {\n            double x, y, z;\n            if (!(is \u003e\u003e x \u003e\u003e y \u003e\u003e z))\n                throw std::string(\"error loading coordinates\");\n            this-\u003evertices.push_back(Vec3(x, y, z));\n        }\n\n        // read the values of triangles\n        for (int i = 0; i \u003c nf; i++)\n        {\n            unsigned int n, a, b, c;\n            //Read values for indexes\n            if (!(is \u003e\u003e n \u003e\u003e a \u003e\u003e b \u003e\u003e c))\n                throw std::string(\"error loading triangles\");\n\n            //Check it a triangle mesh\n            if (n != 3)\n            {\n                std::cerr \u003c\u003c \"Face: \" \u003c\u003c i \u003c\u003c std::endl;\n                throw std::string(\"This reader only support triangle faces\");\n            }\n\n            //Check some errors\n            if (a \u003c 0 || b \u003c 0 || c \u003c 0 || a \u003e= nv || b \u003e= nv || c \u003e= nv)\n            {\n                std::cerr \u003c\u003c \"Triangle: \" \u003c\u003c i \u003c\u003c \" -\u003e \" \u003c\u003c a \u003c\u003c \" \" \u003c\u003c b \u003c\u003c \" \" \u003c\u003c c \u003c\u003c std::endl;\n                throw std::string(\"Invalid value for index\");\n            }\n\n            this-\u003efaces.push_back(Triangle(a, b, c));\n        }\n    }\n\n### 文件解析测试\n\n    TriangleMesh mesh;\n    std::ifstream off_in(\"16Triangles.off\");\n    std::cout \u003c\u003c \"Reading file 16Triangles.off\" \u003c\u003c std::endl;\n    mesh.importFromOff(off_in);\n    std::cout \u003c\u003c \"The mesh was restored\" \u003c\u003c std::endl \u003c\u003c mesh;\n\n### 文件输出测试\n\n    The mesh was restored\n    the mesh has 15 vertices and 16 faces\n    (0,-0.942809,0)\n    (0,1.88562,0)\n    (0.816495,0.471406,0)\n    (-0.816495,0.471406,0)\n    (1.63299,-0.942809,0)\n    (-1.63299,-0.942809,0)\n    (0,0.648183,0)\n    (-0.56134,-0.32409,0)\n    (0.56134,-0.32409,0)\n    (0.408248,1.35529,0)\n    (-0.408248,1.35529,0)\n    (0.969588,-1.0312,0)\n    (1.37784,-0.32409,0)\n    (-1.37784,-0.32409,0)\n    (-0.969588,-1.0312,0)\n    the Triangle a:6, b:7, c: 8\n    the Triangle a:6, b:3, c: 7\n    the Triangle a:3, b:6, c: 10\n    the Triangle a:6, b:9, c: 10\n    the Triangle a:8, b:11, c: 12\n    the Triangle a:7, b:13, c: 14\n    the Triangle a:2, b:6, c: 8\n    the Triangle a:8, b:7, c: 0\n    the Triangle a:6, b:2, c: 9\n    the Triangle a:10, b:9, c: 1\n    the Triangle a:2, b:8, c: 12\n    the Triangle a:8, b:0, c: 11\n    the Triangle a:12, b:11, c: 4\n    the Triangle a:0, b:7, c: 14\n    the Triangle a:7, b:3, c: 13\n    the Triangle a:14, b:13, c: 5\n\n### 保存为.off文件\n\n    void TriangleMesh::saveAsOff(std::ostream \u0026 os) {\n        // write the header\n        os \u003c\u003c \"OFF\" \u003c\u003c \"\\n\" \u003c\u003c this-\u003evertices.size() \u003c\u003c \" \" \u003c\u003c this-\u003efaces.size() \u003c\u003c \" \" \u003c\u003c 0 \u003c\u003c \"\\n\";\n\n        // write vertices\n        for (auto \u0026 v : this-\u003evertices) {\n            os \u003c\u003c v.x \u003c\u003c \" \" \u003c\u003c v.y \u003c\u003c \" \" \u003c\u003c v.z \u003c\u003c \"\\n\";\n        }\n        // write triangles\n        for (auto \u0026 t : this-\u003efaces) {\n            os \u003c\u003c \"3 \" \u003c\u003c t.a \u003c\u003c \" \" \u003c\u003c t.b \u003c\u003c \" \" \u003c\u003c t.c \u003c\u003c \"\\n\";\n        }\n    }\n\n### 保存测试\n\n    std::ofstream off_out(\"16Triangles_out.off\");\n    std::cout \u003c\u003c \"Saving as the .off format\" \u003c\u003c std::endl;\n    mesh.saveAsOff(off_out);\n\n### 保存输出\n\n    Saving as the .off format\n\n# 三角面的运算\n\n## 三角面积\n\n![三角面面积](triangle_area.jpg)\n\n$$\narea = \\frac{\\vec{u} \\times \\vec{v}}{2}\n$$\n\n### 三角面积-实现\n\n    double TriangleMesh::facetArea(Triangle \u0026 f) const {\n        auto a = this-\u003evertices[f.a];\n        auto b = this-\u003evertices[f.b];\n        auto c = this-\u003evertices[f.c];\n\n        auto u = b - a;\n        auto v = c - a;\n\n        return u.cross(v).module() / 2;\n    }\n\n### 三角面积-测试\n\n    std::cout \u003c\u003c \"The surface' area of \" \u003c\u003c mesh.faces[0] \u003c\u003c \" is \" \u003c\u003c mesh.facetArea(mesh.faces[0]) \u003c\u003c std::endl;\n\n### 三角面积-输出\n\n    The surface' area of the Triangle a:6, b:7, c: 8 is 0.545776\n\n## 三角面的法向量\n\n![三角面法向量](triangle_normal.png)\n\n$$\n    \\hat{n} = \\frac{e_1 \\times e_2}{\\lVert e_1 \\times e_2 \\rVert}\n$$\n\n### 三角面法向量-实现\n\n    Vec3 TriangleMesh::surfaceNormal(const Triangle \u0026 t) const {\n        auto a = this-\u003evertices[t.a];\n        auto b = this-\u003evertices[t.b];\n        auto c = this-\u003evertices[t.c];\n\n        auto u = b - a;\n        auto v = c - a;\n\n        return u.cross(v).normalize();\n    }\n\n### 三角面法向量-测试\n\n    std::cout \u003c\u003c \"The surface normal associated with \" \u003c\u003c mesh.faces[0] \u003c\u003c \" is \" \u003c\u003c mesh.surfaceNormal(mesh.faces[0]) \u003c\u003c std::endl;\n\n### 三角面法向量-输出\n\n    The surface normal associated with the Triangle a:6, b:7, c: 8 is (0,0,1)\n\n## 顶点法向量\n\n 顶点处其实是没有法向量定义的, 在这些地方标注了网格不连续的地方.\n 一个近似方法使用平均相邻三角面的法向量并将结果标准化.\n 但是在某些情况下, 其结果并不是所期望的. \n 例如如果使用平均三角形法向量计算顶点的法向量, 那些边缘特性会被平滑化.\n\n### 顶点法向量-实现\n\n    Vec3 TriangleMesh::vertexNormal(unsigned int index) const {\n        Vec3 norm = ZERO_VECTOR;\n        for (auto \u0026 f : this-\u003efaces) {\n            if (f.a == index || f.b == index || f.c == index) {\n                norm = norm + this-\u003esurfaceNormal(f);\n            }\n        }\n        return norm.normalize();\n    }\n\n### 顶点法向量-测试\n\n    std::cout \u003c\u003c \"The vertex normal associated with vectex 0 \" \u003c\u003c mesh.vertices[0] \u003c\u003c \" is \" \u003c\u003c mesh.vertexNormal(0) \u003c\u003c std::endl;\n\n### 顶点法向量-输出\n\n    The vertex normal associated with vectex 0 (0,-0.942809,0) is (0,0,1)\n",
              "slug": "Polygon-Mesh-Data-Structure",
              "date": "2018-11-11 22:14:47",
              "lang": "zh",
              "tags": ["计算机图形", "三角网格", "向量", "几何", "图形结构"],
              "path": "/Polygon-Mesh-Data-Structure/index.html"
            },
            "lang": "zh",
            "_nextI18Next": {
              "initialI18nStore": {
                "zh": {
                  "common": { "Next": "下一页" },
                  "feature-tags": { "Tags": "标签" },
                  "navbar": {
                    "Home": "主页",
                    "Language": "语言",
                    "Tags": "标签",
                    "en": "英语",
                    "es": "西语",
                    "zh": "中文"
                  },
                  "post-layout": { "Author": "作者: {{author}}" }
                },
                "en": {
                  "common": { "Next": "Next" },
                  "feature-tags": { "Tags": "Tags" },
                  "navbar": {
                    "Home": "Home",
                    "Language": "Language",
                    "Tags": "Tags",
                    "en": "English",
                    "es": "Spanish",
                    "zh": "Chinese"
                  },
                  "post-layout": { "Author": "Author: {{author}}" }
                }
              },
              "initialLocale": "zh",
              "ns": ["common", "feature-tags", "navbar", "post-layout"],
              "userConfig": {
                "i18n": {
                  "defaultLocale": "en",
                  "locales": ["en", "es", "zh"]
                },
                "default": {
                  "i18n": {
                    "defaultLocale": "en",
                    "locales": ["en", "es", "zh"]
                  }
                }
              }
            }
          },
          "__N_SSG": true
        },
        "page": "/posts/[slug]",
        "query": { "slug": "Polygon-Mesh-Data-Structure" },
        "buildId": "fixed",
        "isFallback": false,
        "gsp": true,
        "scriptLoader": []
      }
    </script>
  </body>
</html>
