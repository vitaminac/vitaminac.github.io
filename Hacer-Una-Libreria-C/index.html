<!doctype html>
<html lang="en">
  <!-- Head tag -->
  <!-- SEO -->

  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Hacer Una Libreria C｜Gao&#39;s Blog</title>
    <meta property="og:title" content="Hacer Una Libreria C｜Gao&#39;s Blog" />

    <meta name="description" content="Hacer Una Libreria C｜Gao&#39;s Blog" />
    <meta
      property="og:description"
      content="Hacer Una Libreria C｜Gao&#39;s Blog"
    />
    <meta name="author" content="Gao" />
    <meta name="robots" content="index, follow" />
    <meta
      property="og:image"
      content="https://vitaminac.github.io/images/favicon.jpg"
    />
    <link rel="shortcut icon" href="/images/favicon.jpg" />

    <meta name="keywords" content="Systema Operativo" />

    <meta name="theme-color" content="#600090" />
    <meta name="msapplication-navbutton-color" content="#600090" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="#600090" />
    <link
      rel="alternate"
      type="application/atom+xml"
      title="Gao&#39;s Blog"
      href="/atom.xml"
    />

    <link
      rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
      cross-origin="anonymous"
      referrer-policy="no-referrer"
    />
    <link
      rel="canonical"
      href="https://vitaminac.github.io/Hacer-Una-Libreria-C/"
    />

    <!-- jQuery -->
    <script
      type="text/javascript"
      src="https://code.jquery.com/jquery-3.6.0.min.js"
    ></script>
    <!-- Bootstrap -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
      integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
      integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
      crossorigin="anonymous"
    ></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/blog-style.css" />
    <link rel="stylesheet" href="/css/syntax.css" />

    <!-- Google Tag Manager -->

    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, "script", "dataLayer", "GTM-WDC9JKC");
    </script>

    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->

    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=UA-151409235-1"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "UA-151409235-1");
    </script>

    <!-- Google AdSense -->
    <script
      data-ad-client="ca-pub-8356359077918854"
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
    ></script>
    <meta name="generator" content="Hexo 6.3.0" />
  </head>
  <style>
    header.intro-header {
      background-image: url("/images/header.gif");
    }
  </style>
  <!-- hack iOS CSS :active style -->

  <body ontouchstart="" class="animated fadeIn">
    <!-- Main Content -->

    <!--only post-->

    <img
      class="wechat-title-img"
      src="/_next/static/media/default-post-preview.c96b099a.jpeg"
    />

    <!-- Post Content -->
    <article class="container" style="width: 100%; max-width: 100%">
      <!-- Post Container -->
      <div class="post-container">
        <p>
          <a
            target="_blank"
            rel="noopener"
            href="https://github.com/vitaminac/code/blob/master/competition/so/libreria.h"
            >Libraría.h</a
          >
        </p>
        <h2 id="Interfaz-de-Usuario">
          <a
            href="#Interfaz-de-Usuario"
            class="headerlink"
            title="Interfaz de Usuario"
          ></a
          >Interfaz de Usuario
        </h2>
        <p>
          Esta práctica consiste en implementar una librería en el lenguaje de
          programación C. con tres funciones, head, tail y longline, que
          muestran las N líneas por la salida estándar. Existe las diferentes
          opciones. La siguiente pantalla muestra la ayuda cuando el usuario no
          haya pasado ningún argumento.
        </p>
        <p><img src="menu.png" alt="Menu" /></p>
        <p>
          El valor de N es opcional, si no especificamos el valor N, por defecto
          es 5.
        </p>
        <p>Luego nos pedirá que introduzcamos algunas líneas con el teclado.</p>
        <p><img src="head.png" alt="Head" /></p>
        <p>Para simplificar el testeo del programa hemos usado pipe.</p>
        <p>
          Esta pantalla es un ejemplo en el que le damos la entrada y le pedimos
          que muestre las 10 líneas por la salida estándar. La entrada que le
          pasamos es el resultado del comando ps aux mediante pipe, que es la
          lista de los procesos en ejecución.
        </p>
        <p><img src="tail1.png" alt="Tail" /></p>
        <p>
          Este ejemplo es lo mismo que antes solo que le pedimos que muestre más
          líneas.
        </p>
        <p><img src="tail2.png" alt="Tail" /></p>
        <p>
          Si la entrada que le pasamos no tiene suficientes líneas, es decir,
          menos que N. Muestra todos sus contenidos.
        </p>
        <p>
          Si los argumentos que haya pasado son ilegales muestra un mensaje de
          error.
        </p>
        <p><img src="long.png" alt="Long" /></p>
        <h2 id="Descripcion-de-codigo">
          <a
            href="#Descripcion-de-codigo"
            class="headerlink"
            title="Descripción de código"
          ></a
          >Descripción de código
        </h2>
        <h3 id="Head">
          <a href="#Head" class="headerlink" title="Head"></a>Head
        </h3>
        <p>
          La función head muestra las N primeras líneas en la salida estándar
          recibidas por la entrada.<br />Necesitamos una estructura de dato que
          nos permite guardar los caracteres leídos de una línea. Utilizamos un
          puntero a una cadena de caracteres, char * line.<br />Reservamos
          malloc un tamaño mínimo del buffer, capacity y lo multiplicamos por
          tamaño de cada caracter sizeof(char) para establecer el tamaño de la
          línea, si la línea que tenemos que leer supera la capacidad actual,
          duplicamos realloc la capacidad del buffer.<br />También necesitamos
          una variable entera length que se utiliza como longitud actual de la
          línea e ir incrementando length++ cuando leemos más caracteres
          getchar, si supera el tamaño de buffer duplicamos. También hemos hecho
          la comprobación de que si existe suficiente memoria para leer dichas
          líneas.<br />Es posible que la entrada que nos pase no contiene menos
          de N líneas. Por eso tenemos que dividir en casos y hacer el
          control.<br />Cuando llega al final de una línea, guardamos un null
          char ‘\0’ en la última posición, reiniciar las variables de control
          length&#x3D;0, ponemos el resultado de la línea leído en la salida y
          seguir leyendo hasta N líneas. Al final de la función necesitamos
          liberar el puntero.
        </p>
        <h3 id="Tail">
          <a href="#Tail" class="headerlink" title="Tail"></a>Tail
        </h3>
        <p>
          La función tail muestra las N últimas líneas en la salida estándar
          recibida por la entrada.<br />Es similar a la función head la
          estructura de dato que utilizamos es una lista de cadena de caracteres
          char **, entendemos a cadena de caracteres como una cadena de
          caracteres char *. La capacidad de la lista es N y la capacidad de
          cada cadena está limitado por una variable capacities. Duplicamos
          automáticamente el tamaño si es necesario.
        </p>
        <p>
          Además de una variable para indicar la longitud de la línea actual
          characterNumber. También tenemos que añadir un índice para llevar la
          cuenta de líneas leidos lineNumber.
        </p>
        <p>
          Primero inicializamos la lista de N cadena, vamos leyendo carácter a
          carácter, cada vez que leemos un carácter aumentamos la variable
          characterNumber. Si llega al carácter de cambio de línea ‘\n’ añadimos
          null char al final, reiniciamos el valor carácterNumber a 0,
          aumentamos lineNumber, y guardamos la línea en la position lineNumber
          módulo N, así conseguimos reemplazar la última línea laida. Cuando lea
          la N+1 líneas puedan sustituir la primera línea. Y así cuando llegue
          al final EOF, envía los N últimos línea leídas al.
        </p>
        <h3 id="Longlines">
          <a href="#Longlines" class="headerlink" title="Longlines"></a
          >Longlines
        </h3>
        <p>
          La función longlines muestra las N líneas más largas recibidas de
          forma orden de mayor a menor, o todas ellas si hay menos de N líneas,
          por la entrada de forma ordenada en la salida estándar. Empleamos un
          procedimiento similar como hacemos en tail. Y cuando el usuario
          introduzca más de N líneas comprobamos que es más larga que la línea
          más corta y reordenamos en caso necesario.
        </p>
        <p>
          <a
            target="_blank"
            rel="noopener"
            href="https://github.com/vitaminac/code/blob/master/competition/so/libreria.c"
            >Libraría.c</a
          >
        </p>
      </div>
    </article>
    <!-- Custom Theme JavaScript -->
    <script type="text/javascript" src="/js/blog.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js"></script>
    <script>
      $(document).ready(function () {
        anchors.add("p");
      });
    </script>

    <!-- mathjax -->
    <script type="text/x-mathjax-config">
          MathJax.Hub.Config({
          jax: ["input/TeX", "output/SVG"],
          extensions: ["tex2jax.js"],
          showMathMenu: false,
          SVG: { useGlobalCache: false },
          tex2jax: {
              inlineMath: [ ['$','$'], ["\\(","\\)"] ],
              skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
              processEscapes: true
          },
          TeX: {
              equationNumbers: { autoNumber: "AMS" },
              noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
              Macros: { href: "{}" }
          }
      });
    </script>
    <script
      type="text/javascript"
      async
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML-full"
    ></script>

    <!-- jquery.tagcloud.js -->
    <script>
      // only load tagcloud.js in tag.html
      if ($("#tag_cloud").length !== 0) {
        async("https://vitaminac.github.io/js/jquery.tagcloud.js", function () {
          $.fn.tagcloud.defaults = {
            //size: {start: 1, end: 1, unit: 'em'},
            color: {
              start: "#bbbbee",
              end: "#0085a1",
            },
          };
          $("#tag_cloud a").tagcloud();
        });
      }
    </script>

    <script type="text/javascript" src="/js/common.js"></script>

    <script type="text/javascript">
      $("code").addClass("language-cpp");
    </script>
    <script type="text/javascript" src="/js/prism.js"></script>
    <script type="text/javascript">
      addCSS("//css/prism.css");
      Prism.highlightAll();
    </script>

    <!-- render ipynb file -->

    <!-- render ipynb file -->

    <script type="text/javascript" src="/js/render.js"></script>
    <script type="text/javascript">
      $(document).ready(function () {
        render_files("c", "cpp");

        render_files("h", "cpp");
      });
    </script>
  </body>
</html>
