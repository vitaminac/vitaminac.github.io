<!doctype html>
<html lang="en">
  <!-- Head tag -->
  <!-- SEO -->

  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Google Foobar Escape Pods｜Gao&#39;s Blog</title>
    <meta
      property="og:title"
      content="Google Foobar Escape Pods｜Gao&#39;s Blog"
    />

    <meta
      name="description"
      content="Google Foobar Escape Pods｜Gao&#39;s Blog"
    />
    <meta
      property="og:description"
      content="Google Foobar Escape Pods｜Gao&#39;s Blog"
    />
    <meta name="author" content="Gao" />
    <meta name="robots" content="index, follow" />
    <meta
      property="og:image"
      content="https://vitaminac.github.io/images/favicon.jpg"
    />
    <link rel="shortcut icon" href="/images/favicon.jpg" />

    <meta name="keywords" content="algorithms" />

    <meta name="theme-color" content="#600090" />
    <meta name="msapplication-navbutton-color" content="#600090" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="#600090" />
    <link
      rel="alternate"
      type="application/atom+xml"
      title="Gao&#39;s Blog"
      href="/atom.xml"
    />

    <link
      rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
      cross-origin="anonymous"
      referrer-policy="no-referrer"
    />
    <link
      rel="canonical"
      href="https://vitaminac.github.io/posts/Google-Foobar-Escape-Pods/"
    />

    <!-- jQuery -->
    <script
      type="text/javascript"
      src="https://code.jquery.com/jquery-3.6.0.min.js"
    ></script>
    <!-- Bootstrap -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
      integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
      integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
      crossorigin="anonymous"
    ></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/blog-style.css" />
    <link rel="stylesheet" href="/css/syntax.css" />

    <!-- Google Tag Manager -->

    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, "script", "dataLayer", "GTM-WDC9JKC");
    </script>

    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->

    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=UA-151409235-1"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "UA-151409235-1");
    </script>

    <!-- Google AdSense -->
    <script
      data-ad-client="ca-pub-8356359077918854"
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
    ></script>
    <meta name="generator" content="Hexo 6.3.0" />
  </head>
  <style>
    header.intro-header {
      background-image: url("/images/header.gif");
    }
  </style>
  <!-- hack iOS CSS :active style -->

  <body ontouchstart="" class="animated fadeIn">
    <!-- Main Content -->

    <!--only post-->

    <img
      class="wechat-title-img"
      src="/_next/static/media/default-post-preview.c96b099a.jpeg"
    />

    <!-- Post Content -->
    <article class="container" style="width: 100%; max-width: 100%">
      <!-- Post Container -->
      <div class="post-container">
        <p>
          This problem involves solving the equivalent maximum flow problem. We
          can use Ford–Fulkerson algorithm with BFS to calculate the total flow.
        </p>
        <h1 id="Maximum-flow-problem">
          <a
            href="#Maximum-flow-problem"
            class="headerlink"
            title="Maximum flow problem"
          ></a
          >Maximum flow problem
        </h1>
        <p>
          We can use a directed graph as a flow network where the source
          produces the elements at some rate and the sink consumes the material
          at the same rate.
        </p>
        <h2 id="Definition">
          <a href="#Definition" class="headerlink" title="Definition"></a
          >Definition
        </h2>
        <p>
          We define a flow network $G &#x3D; (V, E)$ as a directed graph in
          which each edge $(u, y) \in E$ has a nonnegative capacity $c(u, v) \ge
          0$ and there is not an edge $(v, u)$ in the reverse direction. We
          distinguish two vertices in a flow network: a
          <strong>source s</strong> and a <strong>sink t</strong>, thus for each
          vertex $v \in V$, the flow network contains a path $ s
          \rightsquigarrow v \rightsquigarrow t$. A <strong>flow</strong> in $G$
          is a real-valued function $f: V \times V \to R$ that satisfies $0 \le
          f(u, v) \le c(u, v)$ and <strong>flow conservation</strong> implies
          for all $u \in V - \\\\{s, t\\\\}$, $\sum_{v \in V} f(v, u) &#x3D;
          \sum_{v \in V} f(u, v)$.
        </p>
        <p>
          We call the nonegative quantity $f(u, v)$ the flow from vertex $u$ to
          vertex $v$. When $(u, v) \notin E$, there can be no flow from $u$ to
          $v$, and $f(u, v) &#x3D; 0$. The <strong>value</strong> $|f|$ of a
          flow $f$ is defined as $|f| &#x3D; \sum_{v \in V} f(s, v) - \sum_{v
          \in V} f(v, s)$. In the <strong>maximum-flow problem</strong>, we are
          given a flow network $G$ with source $s$ and sink $t$, and we wish to
          find a flow of maximum value.
        </p>
        <h2 id="Transformation">
          <a
            href="#Transformation"
            class="headerlink"
            title="Transformation"
          ></a
          >Transformation
        </h2>
        <p>
          We call the two edges $(v_1, v_2)$ and $(v_2, v_1)$ antiparallel. And
          if we wish model a flow problem with
          <strong>antiparallel edges</strong>, we must transform the network
          into an equivalent one containing without antiparallel edges by adding
          a new vertex $v^\prime$ and replacing edege $(v_1, v_2)$ with the pair
          of edges $(v_1, v^\prime)$ and $(v^\prime, v_2)$.
        </p>
        <p>
          <img
            src="equivalent-antiparallel-flow.png"
            alt="Equivalent Antiparallel Flow"
          />
        </p>
        <p>
          When there are several sources and sinks, we can reduce the problem to
          an ordinary maximum flow problem by adding a
          <strong>supersource</strong> $s$ and a directed edge $(s, s_i)$ with
          capacity $c(s, s_i) &#x3D; \infty$ for each $i&#x3D;1, 2, …, n$ and a
          new <strong>supersink</strong> $t$ and a directed edge $(t_i, t)$ with
          capacity $c(t_i, t) &#x3D; \infty$ for each $i &#x3D; 1, 2, .., n$.
        </p>
        <p>
          <img
            src="equivalent-multiple-sources-sinks-flow.png"
            alt="Equivalent Multiple Sources Sinks Flow"
          />
        </p>
        <h2 id="Residual-Network">
          <a
            href="#Residual-Network"
            class="headerlink"
            title="Residual Network"
          ></a
          >Residual Network
        </h2>
        <p>
          Given a flow network $G &#x3D; (V, E)$ with source $s$ and sink $t$
          and a flow $f$, the <strong>residual network</strong> $G_{f}$ consists
          of <strong>residual edges</strong> with capacities $c_{f}(u, v)$
        </p>
        <p>
          $$<br />c_{f}(u, v) &#x3D;<br />\begin{cases}<br />
          c(u, v) - f(u, v) &amp; \text{ if } (u, v) \in E\\\\<br />
          f(v, u) &amp; \text{ if } (v, u) \in E\\\\<br />
          0 &amp; \text{otherwise}\\\\<br />\end{cases}<br />$$
        </p>
        <p><img src="residual-network.png" alt="Residual Network" /></p>
        <h3 id="Augmenting-Paths">
          <a
            href="#Augmenting-Paths"
            class="headerlink"
            title="Augmenting Paths"
          ></a
          >Augmenting Paths
        </h3>
        <p>
          Given a flow network $G &#x3D; (V, E)$ and a flow $f$, an
          <strong>augmenting path</strong> $p$ is a simple path from $s$ to $t$
          in the residual network $G_{f}$. We call the maximum amount by which
          we can increase the flow on each edge in an augmenting path $p$ the
          <strong>residual capacity</strong> of $p$, given by $c_f(p) &#x3D;
          \min{ \\\\{ c_f(u, v) : (u, v) \text{ is on } p \\\\} }$.
        </p>
        <h2 id="The-Ford-Fulkerson-Method">
          <a
            href="#The-Ford-Fulkerson-Method"
            class="headerlink"
            title="The Ford Fulkerson Method"
          ></a
          >The Ford Fulkerson Method
        </h2>
        <p>
          The Ford-Fulkerson method is a <strong>greedy algorithm</strong> that
          iteratively increases the value of the flow. At each iteration.
        </p>
        <p>
          Given a network $G &#x3D; (V, E)$ with flow capacity $c$, a source
          node $s$ and a sink node $t$
        </p>
        <ol>
          <li>$f \leftarrow 0$</li>
          <li>$f(u, v) \leftarrow 0$ for all edges $(u, v) \in E$</li>
          <li>
            <strong>while</strong> there exists an
            <strong>augmenting path</strong> $p$
            <ol>
              <li>Find $c_f(p)$</li>
              <li>$f \leftarrow f + c_f(p)$</li>
              <li>
                for each edge $(u, v) \in p$
                <ol>
                  <li>
                    if $(u, v) \in E$
                    <ol>
                      <li>$f(u, v) \leftarrow f(u, v) + c_f(p)$</li>
                    </ol>
                  </li>
                  <li>
                    else
                    <ol>
                      <li>$f(v, u) \leftarrow f(v, u) - c_f(p)$</li>
                    </ol>
                  </li>
                </ol>
              </li>
            </ol>
          </li>
          <li><strong>return</strong> $f$</li>
        </ol>
        <p>
          <a
            target="_blank"
            rel="noopener"
            href="https://github.com/vitaminac/code/blob/2c9df93333/judge/src/main/java/foobar/l4/EscapePods.java"
            >Escape Pods</a
          >
        </p>
        <h2 id="Reference">
          <a href="#Reference" class="headerlink" title="Reference"></a
          >Reference
        </h2>
        <ul>
          <li>Introduction to Algorithms, pages 708~730</li>
          <li>
            <a
              target="_blank"
              rel="noopener"
              href="https://en.wikipedia.org/wiki/Ford%E2%80%93Fulkerson_algorithm#Algorithm"
              >Ford–Fulkerson algorithm</a
            >
          </li>
          <li>
            <a
              target="_blank"
              rel="noopener"
              href="https://www.geeksforgeeks.org/ford-fulkerson-algorithm-for-maximum-flow-problem/"
              >GeeksforGeeks: Ford-Fulkerson Algorithm for Maximum Flow
              Problem</a
            >
          </li>
          <li>
            <a
              target="_blank"
              rel="noopener"
              href="https://www.youtube.com/watch?v=SqGeM3FYkfo"
              >Edmonds Karp Algorithm for Max-Flow</a
            >
          </li>
          <li>
            <a
              target="_blank"
              rel="noopener"
              href="https://surajshetiya.github.io/Google-foobar/#round-4"
              >Google Foobar Round 4</a
            >
          </li>
          <li>
            <a
              target="_blank"
              rel="noopener"
              href="https://github.com/nkapliev/google-foo.bar/blob/master/problems/4.2_escape_pods.py"
              >4.2_escape_pods.py</a
            >
          </li>
          <li>
            <a
              target="_blank"
              rel="noopener"
              href="http://xiaohanyu.me/posts/2017-04-30-google-foobar-interview/#cb8"
              >Google foo.bar 面试记</a
            >
          </li>
        </ul>
      </div>
    </article>
    <!-- Custom Theme JavaScript -->
    <script type="text/javascript" src="/js/blog.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js"></script>
    <script>
      $(document).ready(function () {
        anchors.add("p");
      });
    </script>

    <!-- mathjax -->
    <script type="text/x-mathjax-config">
          MathJax.Hub.Config({
          jax: ["input/TeX", "output/SVG"],
          extensions: ["tex2jax.js"],
          showMathMenu: false,
          SVG: { useGlobalCache: false },
          tex2jax: {
              inlineMath: [ ['$','$'], ["\\(","\\)"] ],
              skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
              processEscapes: true
          },
          TeX: {
              equationNumbers: { autoNumber: "AMS" },
              noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
              Macros: { href: "{}" }
          }
      });
    </script>
    <script
      type="text/javascript"
      async
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML-full"
    ></script>

    <script type="text/javascript" src="/js/common.js"></script>

    <script type="text/javascript">
      $("code").addClass("language-java");
    </script>
    <script type="text/javascript" src="/js/prism.js"></script>
    <script type="text/javascript">
      addCSS("//css/prism.css");
      Prism.highlightAll();
    </script>

    <!-- render ipynb file -->

    <!-- render ipynb file -->

    <script type="text/javascript" src="/js/render.js"></script>
    <script type="text/javascript">
      $(document).ready(function () {
        render_files("java", "java");
      });
    </script>
  </body>
</html>
