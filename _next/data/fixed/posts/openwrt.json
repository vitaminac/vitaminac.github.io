{
  "pageProps": {
    "postData": {
      "slug": "openwrt",
      "tags": [
        "openwrt",
        "network",
        "router",
        "hard router",
        "Workspace Setup"
      ],
      "isDraft": false,
      "isArchived": false,
      "title": "OpenWrt Configuration",
      "date": "2025-08-02 11:08:07",
      "isLegacy": false,
      "lang": "en",
      "tocHtml": "<ol>\n<li><a href=\"#Configuration-through-OpenWrt-LuCI-web-interface\">Configuration through OpenWrt LuCI web interface</a></li>\n<li><a href=\"#Configuration-through-OpenWrt-SSH\">Configuration through OpenWrt SSH</a>\n<ol>\n<li><a href=\"#Disabling-password-authentication\">Disabling password authentication</a></li>\n</ol>\n</li>\n<li><a href=\"#Obtain-PPPoE-Username--Password\">Obtain PPPoE Username &#x26; Password</a></li>\n<li><a href=\"#Configure-PPPoE\">Configure PPPoE</a></li>\n<li><a href=\"#Adblock\">Adblock</a></li>\n<li><a href=\"#Other-Utilities\">Other Utilities</a></li>\n<li><a href=\"#Benchmark\">Benchmark</a>\n<ol>\n<li><a href=\"#Wireless-Speed-Test\">Wireless Speed Test</a></li>\n</ol>\n</li>\n<li><a href=\"#Map-with-a-Free-Domain\">Map with a Free Domain</a>\n<ol>\n<li><a href=\"#Verify-NAT\">Verify NAT</a></li>\n<li><a href=\"#Create-Domain\">Create Domain</a></li>\n<li><a href=\"#Keep-the-IP-Address-Up-to-Date\">Keep the IP Address Up-to-Date</a></li>\n</ol>\n</li>\n<li><a href=\"#Expose-Internal-Service-to-Internet\">Expose Internal Service to Internet</a></li>\n<li><a href=\"#Reference\">Reference</a></li>\n</ol>",
      "articleHtml": "<p>OpenWrt is highly customizable and <a href=\"https://github.com/openwrt/openwrt\" rel=\"nofollow\" target=\"_blank\">open-source</a> Linux-based operating system designed for routers. OpenWrt offers much greater control, flexibility, and features for users who want more than just basic internet access.</p>\n<h2 id=\"Configuration-through-OpenWrt-LuCI-web-interface\">Configuration through OpenWrt LuCI web interface<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#Configuration-through-OpenWrt-LuCI-web-interface\"><i class=\"fa-solid fa-link\"></i></a></h2>\n<ul>\n<li>Change to DHCP mode after the router is restarted</li>\n<li>The gateway by default is <a href=\"http://192.168.1.1\" rel=\"nofollow\" target=\"_blank\">http://192.168.1.1</a> without password</li>\n<li>System &gt; Administration<!-- -->\n<ul>\n<li>change router admin password</li>\n<li>SSH Access<!-- -->\n<ul>\n<li>modify interface to LAN</li>\n<li>change SSH port to other</li>\n</ul>\n</li>\n<li>SSH Keys<!-- -->\n<ul>\n<li>past the content of your public key file. It will be a long string starting with <code>ssh-rsa â€¦</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Network &gt; Wireless &gt; 2.4G AP &amp; 5G AP<!-- -->\n<ul>\n<li>Device Configuration<!-- -->\n<ul>\n<li>Advance Settings: modify country code</li>\n</ul>\n</li>\n<li>Interface Configuration<!-- -->\n<ul>\n<li>General Setup: modify ESSID</li>\n<li>Wireless Security<!-- -->\n<ul>\n<li>Encryption: WPA2-PSK</li>\n<li>Cipher: Force CCMP</li>\n<li>Key: Your Wi-Fi Password</li>\n</ul>\n</li>\n<li>Advanced Settings<!-- -->\n<ul>\n<li>uncheck <em>Disassociate On Low Acknowledgement</em></li>\n<li>check <em>Disable Inactivity Polling</em></li>\n<li>Time interval for rekeying GTK: 3600</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Network &gt; Wireless &gt; 5G AP &gt; Device Configuration<!-- -->\n<ul>\n<li>Operating frequency<!-- -->\n<ul>\n<li>Mode: <strong>AC</strong></li>\n<li>Channel: 36</li>\n<li>Width <strong>80mhz</strong></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Network &gt; Wireless: Save &amp; Apply</li>\n<li>Network &gt; Interface<!-- -->\n<ol>\n<li>LAN &gt; General Settings: modify IPv4 address to 192.168.0.1 if 192.168.1.1 as gateway has conflict with upstream</li>\n<li>WAN &gt; Advanced Settings: unchecked <strong>Use DNS servers advertised by peer</strong></li>\n<li>WAN &gt; Advanced Settings: add and click <strong>+</strong> button for following DNS <strong>1.1.1.1</strong>, <strong>8.8.8.8</strong>, <strong>9.9.9.9</strong> in <strong>Use custom DNS servers</strong></li>\n<li>Save &amp; Apply</li>\n</ol>\n</li>\n<li>Network &gt; Firewall &gt; General Settings<!-- -->\n<ol>\n<li>Routing/NAT Offloading<!-- -->\n<ul>\n<li>check <strong>Software flow offloading</strong></li>\n<li>check <strong>Hardware flow offloading</strong></li>\n</ul>\n</li>\n<li>Save &amp; Apply</li>\n</ol>\n</li>\n<li>Network &gt; DHCP and DNS &gt; Hostnames: add custom binding of domain name to static IP for example blocking a website. You might need to add two versions of mapping, one for IPv4 and one for IPv6.<!-- -->\n<ul>\n<li>for blocking the domain it is recommended to use adblock</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Configuration-through-OpenWrt-SSH\">Configuration through OpenWrt SSH<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#Configuration-through-OpenWrt-SSH\"><i class=\"fa-solid fa-link\"></i></a></h2>\n<h3 id=\"Disabling-password-authentication\">Disabling password authentication<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#Disabling-password-authentication\"><i class=\"fa-solid fa-link\"></i></a></h3>\n<pre><code>uci set dropbear.@dropbear[0].PasswordAuth=&quot;0&quot;\nuci set dropbear.@dropbear[0].RootPasswordAuth=&quot;0&quot;\nuci commit dropbear\n/etc/init.d/dropbear restart\n</code></pre>\n<h2 id=\"Obtain-PPPoE-Username--Password\">Obtain PPPoE Username &amp; Password<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#Obtain-PPPoE-Username--Password\"><i class=\"fa-solid fa-link\"></i></a></h2>\n<p>The steps to obtain PPPoE will vary per country and operator. I&#x27;ve followed <a href=\"https://www.frikidelto.com/tutorial/como-conseguir-el-usuario-y-contrasena-pppoe-para-instalar-un-router-neutro/\" rel=\"nofollow\" target=\"_blank\">this tutorial</a>.</p>\n<h2 id=\"Configure-PPPoE\">Configure PPPoE<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#Configure-PPPoE\"><i class=\"fa-solid fa-link\"></i></a></h2>\n<ol>\n<li>Network&gt; Interfaces &gt; Devices: Add device configuration<!-- -->\n<ol>\n<li>Select VLAN (802.1q) as device type</li>\n<li>Select WAN as base device</li>\n<li>Introduce 20 in VLAN ID 20 (This configuration depends on the operator)</li>\n<li>uncheck &quot;Enable IPv6&quot;</li>\n<li>Save</li>\n<li>Save &amp; apply</li>\n</ol>\n</li>\n<li>Network&gt; Interfaces &gt; Interface: click edit on WAN configuration<!-- -->\n<ol>\n<li>Change protocol to PPPoE</li>\n<li>Select Software VLAN wan.20 as device</li>\n<li>Introduce PPPoE username and password</li>\n<li>Save</li>\n<li>Save &amp; apply</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"Adblock\">Adblock<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#Adblock\"><i class=\"fa-solid fa-link\"></i></a></h2>\n<ul>\n<li>System &gt; Software: Update lists</li>\n<li>System &gt; Software: Search <strong>curl</strong> and install.</li>\n<li>System &gt; Software: Search <code>adblock</code>, <code>luci-app-adblock</code> and install.</li>\n<li>Services &gt; Adblock<!-- -->\n<ul>\n<li>General Settings<!-- -->\n<ul>\n<li>enable force local DNS</li>\n<li>enable dns report</li>\n</ul>\n</li>\n<li>Additional Settings &gt; Download Utility: Select <strong>curl</strong></li>\n<li>Edit Blacklist: add domain you want to block</li>\n</ul>\n</li>\n<li>Services &gt; Adblock: Save &amp; Apply</li>\n</ul>\n<h2 id=\"Other-Utilities\">Other Utilities<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#Other-Utilities\"><i class=\"fa-solid fa-link\"></i></a></h2>\n<ul>\n<li>System &gt; Software: Search <em>htop</em> and install.</li>\n</ul>\n<p>You can also access router OS through SSH with <code>ssh root@192.168.0.1</code> and install the packages with <code>opkg</code> command. It is recommended to not upgrade <code>luci-*</code> packages, this package is web interface of router, and it often generates conflict between the new version and old version.</p>\n<h2 id=\"Benchmark\">Benchmark<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#Benchmark\"><i class=\"fa-solid fa-link\"></i></a></h2>\n<h3 id=\"Wireless-Speed-Test\">Wireless Speed Test<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#Wireless-Speed-Test\"><i class=\"fa-solid fa-link\"></i></a></h3>\n<h4 id=\"TX-Device---Wireless---Router\">TX: Device - Wireless - Router<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#TX-Device---Wireless---Router\"><i class=\"fa-solid fa-link\"></i></a></h4>\n<p>Install <a href=\"https://openwrt.org/packages/pkgdata/iperf3\" rel=\"nofollow\" target=\"_blank\"><code>iperf3</code></a> on OpenWrt and after than run <code>iperf3 -s</code>. Then from a client device connected to the network through wireless execute the command <code>iperf3 -c &lt;IP Address of Your OpenWrt Router&gt; -p &lt;iperf3 Server Port&gt; -f m -t 30 -w 256k -P 4</code>.</p>\n<h4 id=\"TX-Device---Wireless---Router---Ethernet---Device\">TX: Device - Wireless - Router - Ethernet - Device<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#TX-Device---Wireless---Router---Ethernet---Device\"><i class=\"fa-solid fa-link\"></i></a></h4>\n<p>Install <code>iperf3</code> on another device connected to the network through Ethernet interface and then repeat the same testing again this device. The reason we need to repeat the testing with this configuration is because <a href=\"https://forum.openwrt.org/t/iperf-measure-network-speed/9203/2\" rel=\"nofollow\" target=\"_blank\">your router might not be able to process the packets as consumer efficiently but do switch packet quickly</a>.</p>\n<h4 id=\"RX\">RX<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#RX\"><i class=\"fa-solid fa-link\"></i></a></h4>\n<p>Repeat the experiments but reverse the relationship of server and client. You should now run <code>iperf3 -s</code> in your device to verify the download speed.</p>\n<h2 id=\"Map-with-a-Free-Domain\">Map with a Free Domain<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#Map-with-a-Free-Domain\"><i class=\"fa-solid fa-link\"></i></a></h2>\n<h3 id=\"Verify-NAT\">Verify NAT<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#Verify-NAT\"><i class=\"fa-solid fa-link\"></i></a></h3>\n<p>First you need to confirm with your internet provider that your router doesn&#x27;t live behind a <a href=\"https://en.wikipedia.org/wiki/Network_address_translation\" rel=\"nofollow\" target=\"_blank\">NAT</a> or <a href=\"https://en.wikipedia.org/wiki/Carrier-grade_NAT\" rel=\"nofollow\" target=\"_blank\">CGNAT</a>. You can also manually verify this by checking your IP address when you search in Google and the IP address from OpenWrt GUI -&gt; Network -&gt; Interfaces -&gt; WAN -&gt; IPv4.</p>\n<h3 id=\"Create-Domain\">Create Domain<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#Create-Domain\"><i class=\"fa-solid fa-link\"></i></a></h3>\n<p>You can request a free domain with <a href=\"https://www.duckdns.org/\" rel=\"nofollow\" target=\"_blank\">Duck DNS</a>.</p>\n<h3 id=\"Keep-the-IP-Address-Up-to-Date\"><a href=\"https://www.duckdns.org/install.jsp\" rel=\"nofollow\" target=\"_blank\">Keep the IP Address Up-to-Date</a><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#Keep-the-IP-Address-Up-to-Date\"><i class=\"fa-solid fa-link\"></i></a></h3>\n<h2 id=\"Expose-Internal-Service-to-Internet\">Expose Internal Service to Internet<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#Expose-Internal-Service-to-Internet\"><i class=\"fa-solid fa-link\"></i></a></h2>\n<p>From OpenWrt Luci GUI -&gt; Network -&gt; DHCP and DNS -&gt; Static Leases, set your internal host with a static IP address so port forwarding can work.</p>\n<p>Go to OpenWrt Luci GUI -&gt; Network -&gt; Firewall -&gt; Port Forwards, then add rules to forward traffic from Internet to your internal host which lives inside of private network e.g. port forwarding to SSH server.</p>\n<h2 id=\"Reference\">Reference<a aria-hidden=\"true\" tabindex=\"-1\" href=\"#Reference\"><i class=\"fa-solid fa-link\"></i></a></h2>\n<ul>\n<li><a href=\"https://bandaancha.eu/articulos/canales-wifi-banda-5-ghz-espana-mejor-9826\" rel=\"nofollow\" target=\"_blank\">Canales wifi en la banda 5 GHz en EspaÃ±a: Lo que nunca te han contado</a></li>\n<li><a href=\"https://bandaancha.eu/articulos/todas-canales-bandas-wifi-2-4-5-6ghz-10117\" rel=\"nofollow\" target=\"_blank\">Todos los canales y bandas de frecuencias wifi legales en EspaÃ±a en 2,4; 5 y 6 GHz</a></li>\n<li><a href=\"https://bandaancha.eu/articulos/mejor-router-wifi-tiene-muchas-antenas-9810\" rel=\"nofollow\" target=\"_blank\">Â¿Es mejor un router wifi si tiene muchas antenas MIMO?</a></li>\n<li><a href=\"https://www.cbtnuggets.com/blog/certifications/cisco/when-to-use-20mhz-vs-40mhz-vs-80mhz\" rel=\"nofollow\" target=\"_blank\">When to Use 20mhz vs 40mhz vs 80mhz</a></li>\n<li><a href=\"https://www.smallnetbuilder.com/wireless/wireless-features/33228-wi-fi-ping-spikes-causes-and-fixes\" rel=\"nofollow\" target=\"_blank\">Wi-Fi Ping Spikes: Causes and Fixes</a></li>\n<li><a href=\"https://www.intel.com/content/www/us/en/support/articles/000005725/wireless/legacy-intel-wireless-products.html\" rel=\"nofollow\" target=\"_blank\">Different Wi-Fi Protocols and Data Rates</a></li>\n<li><a href=\"https://forum.archive.openwrt.org/viewtopic.php?id=54943\" rel=\"nofollow\" target=\"_blank\">Edit /etc/hosts via WebUI</a></li>\n</ul>"
    },
    "lang": "en",
    "_nextI18Next": {
      "initialI18nStore": {
        "en": {
          "navbar": {
            "Home": "Home",
            "Language": "Language",
            "Tags": "Tags",
            "en": "English",
            "es": "Spanish",
            "zh": "Chinese"
          },
          "post-layout": { "Author": "Author: {{author}}", "Tags": "Tags" }
        }
      },
      "initialLocale": "en",
      "ns": ["navbar", "post-layout"],
      "userConfig": {
        "i18n": { "defaultLocale": "en", "locales": ["en", "es", "zh"] },
        "default": {
          "i18n": { "defaultLocale": "en", "locales": ["en", "es", "zh"] }
        }
      }
    }
  },
  "__N_SSG": true
}
