<!doctype html>
<html lang="en">
  <!-- Head tag -->
  <!-- SEO -->

  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Testable Design｜Gao&#39;s Blog</title>
    <meta property="og:title" content="Testable Design｜Gao&#39;s Blog" />

    <meta name="description" content="Testable Design｜Gao&#39;s Blog" />
    <meta property="og:description" content="Testable Design｜Gao&#39;s Blog" />
    <meta name="author" content="Gao" />
    <meta name="robots" content="index, follow" />
    <meta
      property="og:image"
      content="https://vitaminac.github.io/images/favicon.jpg"
    />
    <link rel="shortcut icon" href="/images/favicon.jpg" />

    <meta name="keywords" content="Testable Design" />

    <meta name="theme-color" content="#600090" />
    <meta name="msapplication-navbutton-color" content="#600090" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="#600090" />
    <link
      rel="alternate"
      type="application/atom+xml"
      title="Gao&#39;s Blog"
      href="/atom.xml"
    />

    <link
      rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
      cross-origin="anonymous"
      referrer-policy="no-referrer"
    />
    <link rel="canonical" href="https://vitaminac.github.io/Testable-Design/" />

    <!-- jQuery -->
    <script
      type="text/javascript"
      src="https://code.jquery.com/jquery-3.6.0.min.js"
    ></script>
    <!-- Bootstrap -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
      integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
      integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
      crossorigin="anonymous"
    ></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/blog-style.css" />
    <link rel="stylesheet" href="/css/syntax.css" />

    <!-- Google Tag Manager -->

    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, "script", "dataLayer", "GTM-WDC9JKC");
    </script>

    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->

    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=UA-151409235-1"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "UA-151409235-1");
    </script>

    <!-- Google AdSense -->
    <script
      data-ad-client="ca-pub-8356359077918854"
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
    ></script>
    <meta name="generator" content="Hexo 6.3.0" />
  </head>
  <style>
    header.intro-header {
      background-image: url("/images/header.gif");
    }
  </style>
  <!-- hack iOS CSS :active style -->

  <body ontouchstart="" class="animated fadeIn">
    <!-- Main Content -->

    <!--only post-->

    <img
      class="wechat-title-img"
      src="/_next/static/media/default-post-preview.c96b099a.jpeg"
    />

    <!-- Post Content -->
    <article class="container" style="width: 100%; max-width: 100%">
      <!-- Post Container -->
      <div class="post-container">
        <h1 id="Guidelines-for-Testable-Design">
          <a
            href="#Guidelines-for-Testable-Design"
            class="headerlink"
            title="Guidelines for Testable Design"
          ></a
          >Guidelines for Testable Design
        </h1>
        <h2 id="Testability-issues">
          <a
            href="#Testability-issues"
            class="headerlink"
            title="Testability issues"
          ></a
          >Testability issues
        </h2>
        <p>
          A programmer struggling to write a test is facing off against one of a
          few common show-stoppers. They mostly fall under two categories:
          restricted access, and inability to substitute certain parts of the
          implementation.
        </p>
        <h3 id="Can’t-instantiate-a-class">
          <a
            href="#Can’t-instantiate-a-class"
            class="headerlink"
            title="Can’t instantiate a class"
          ></a
          >Can’t instantiate a class
        </h3>
        <p>
          This mostly happens with third-party libraries that weren’t designed
          with testability in mind. Another common cause for the inability to
          instantiate a class is that constructor depends on some static
          initialization.
        </p>
        <h3 id="Can’t-substitute-a-collaborator">
          <a
            href="#Can’t-substitute-a-collaborator"
            class="headerlink"
            title="Can’t substitute a collaborator"
          ></a
          >Can’t substitute a collaborator
        </h3>
        <p>
          If the method is supposed to engage in an interaction with
          collaborating objects, but you find yourself incapable of intercepting
          the interaction you’re interested in. This might be because the
          collaborator is hard-wired into the method&#x2F;class you’re testing
          and can’t be substituted with a test double.
        </p>
        <h2 id="Avoid-complex-private-methods">
          <a
            href="#Avoid-complex-private-methods"
            class="headerlink"
            title="Avoid complex private methods"
          ></a
          >Avoid complex private methods
        </h2>
        <p>
          You should strive to write private method so that you don’t feel the
          need to test your private methods directly, make your public methods
          read well, it should be perfectly fine that they get tested<br />only
          through those public methods.
        </p>
        <h2 id="Avoid-final-methods">
          <a
            href="#Avoid-final-methods"
            class="headerlink"
            title="Avoid final methods"
          ></a
          >Avoid final methods
        </h2>
        <p>
          The main purpose of marking a method as final is to ensure that it
          isn’t overwritten by a subclass, but often burden of worse testability
          outweigh the benefit of having the final.
        </p>
        <h2 id="Avoid-static-methods">
          <a
            href="#Avoid-static-methods"
            class="headerlink"
            title="Avoid static methods"
          ></a
          >Avoid static methods
        </h2>
        <p>
          A static method is easy to write, but you’ll have a hard time later if
          you ever need to stub it out in a test. Instead, create an object that
          provides that functionality through an instance method.
        </p>
        <h2 id="Use-new-with-care">
          <a
            href="#Use-new-with-care"
            class="headerlink"
            title="Use new with care"
          ></a
          >Use new with care
        </h2>
        <p>
          Every time you “new up” an object you’re nailing down its exact
          implementation. For that reason, your methods should only instantiate
          objects you won’t want to substitute with test doubles, it should be
          passed into the method somehow rather than instantiated from within
          that method.
        </p>
        <h2 id="Avoid-logic-in-constructors">
          <a
            href="#Avoid-logic-in-constructors"
            class="headerlink"
            title="Avoid logic in constructors"
          ></a
          >Avoid logic in constructors
        </h2>
        <p>
          Constructors are hard to bypass because a subclass’s constructor will
          always trigger at least one of the superclass constructors. Hence, you
          should avoid any test-critical code or logic in your constructors.
        </p>
        <h2 id="Avoid-the-Singleton">
          <a
            href="#Avoid-the-Singleton"
            class="headerlink"
            title="Avoid the Singleton"
          ></a
          >Avoid the Singleton
        </h2>
        <p>
          There are situations where you want just one instance of a class to
          exist at runtime. But the Singleton pattern tends to prevent tests
          from creating different variants. If you do find yourself with a
          static Singleton accessor, consider making the singleton
          <strong>getInstance()</strong> method return an interface instead of
          the concrete class. An interface is much easier to fake. The much
          testable design would be that doesn’t enforce a single instance but
          rather relies on the programmers’ agreement or modern dependency
          injection framework.
        </p>
        <h2 id="Favor-composition-over-inheritance">
          <a
            href="#Favor-composition-over-inheritance"
            class="headerlink"
            title="Favor composition over inheritance"
          ></a
          >Favor composition over inheritance
        </h2>
        <p>
          Inheritance does allow you to reuse code but it also brings a rigid
          class hierarchy that inhibits testability. If your intent is to reuse
          functionality it’s often better to do that by means of composition:
          using another object rather than inheriting from its class.
        </p>
        <h2 id="Wrap-external-libraries">
          <a
            href="#Wrap-external-libraries"
            class="headerlink"
            title="Wrap external libraries"
          ></a
          >Wrap external libraries
        </h2>
        <p>
          Wrap the untestable piece of code of the external library behind your
          own interface, a thin layer that is testable that’s test-friendly and
          makes it easy to substitute the actual implementation.
        </p>
        <h2 id="Reference">
          <a href="#Reference" class="headerlink" title="Reference"></a
          >Reference
        </h2>
        <ul>
          <li>
            <a
              target="_blank"
              rel="noopener"
              href="https://www.manning.com/books/effective-unit-testing"
              >Effective Unit Testing</a
            >
          </li>
        </ul>
      </div>
    </article>
    <!-- Custom Theme JavaScript -->
    <script type="text/javascript" src="/js/blog.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js"></script>
    <script>
      $(document).ready(function () {
        anchors.add("p");
      });
    </script>

    <script type="text/javascript" src="/js/common.js"></script>

    <!-- render ipynb file -->

    <!-- render ipynb file -->
  </body>
</html>
