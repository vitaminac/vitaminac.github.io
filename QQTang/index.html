<!doctype html>
<html lang="en">
  <!-- Head tag -->
  <!-- SEO -->

  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>浅谈QQ堂｜Gao&#39;s Blog</title>
    <meta property="og:title" content="浅谈QQ堂｜Gao&#39;s Blog" />

    <meta name="description" content="浅谈QQ堂｜Gao&#39;s Blog" />
    <meta property="og:description" content="浅谈QQ堂｜Gao&#39;s Blog" />
    <meta name="author" content="Gao" />
    <meta name="robots" content="index, follow" />
    <meta
      property="og:image"
      content="https://vitaminac.github.io/images/favicon.jpg"
    />
    <link rel="shortcut icon" href="/images/favicon.jpg" />

    <meta name="keywords" content="QQ堂,外挂,Game,zlib" />

    <meta name="theme-color" content="#600090" />
    <meta name="msapplication-navbutton-color" content="#600090" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="#600090" />
    <link
      rel="alternate"
      type="application/atom+xml"
      title="Gao&#39;s Blog"
      href="/atom.xml"
    />

    <link
      rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
      cross-origin="anonymous"
      referrer-policy="no-referrer"
    />
    <link rel="canonical" href="https://vitaminac.github.io/QQTang/" />

    <!-- jQuery -->
    <script
      type="text/javascript"
      src="https://code.jquery.com/jquery-3.6.0.min.js"
    ></script>
    <!-- Bootstrap -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
      integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
      integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
      crossorigin="anonymous"
    ></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/blog-style.css" />
    <link rel="stylesheet" href="/css/syntax.css" />

    <!-- Google Tag Manager -->

    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, "script", "dataLayer", "GTM-WDC9JKC");
    </script>

    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->

    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=UA-151409235-1"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "UA-151409235-1");
    </script>

    <!-- Google AdSense -->
    <script
      data-ad-client="ca-pub-8356359077918854"
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
    ></script>
    <meta name="generator" content="Hexo 6.3.0" />
  </head>
  <style>
    header.intro-header {
      background-image: url("/images/header.gif");
    }
  </style>
  <!-- hack iOS CSS :active style -->

  <body ontouchstart="" class="animated fadeIn">
    <!-- Main Content -->

    <!--only post-->

    <img
      class="wechat-title-img"
      src="/_next/static/media/default-post-preview.c96b099a.jpeg"
    />

    <!-- Post Content -->
    <article class="container" style="width: 100%; max-width: 100%">
      <!-- Post Container -->
      <div class="post-container">
        <h2 id="QQ堂DLL劫持">
          <a href="#QQ堂DLL劫持" class="headerlink" title="QQ堂DLL劫持"></a
          >QQ堂DLL劫持
        </h2>
        <p>
          在QQ堂目录下面有个<code>zlib1.dll</code>文件,
          我们可以利用之前介绍的技巧制作自己的<a
            href="/downloads/code/QQTang/zlib1.dll"
            >zlib1.dll</a
          >当作我们的外挂程序.
        </p>
        <h2 id="修复版本过低和验证码闪退补丁">
          <a
            href="#修复版本过低和验证码闪退补丁"
            class="headerlink"
            title="修复版本过低和验证码闪退补丁"
          ></a
          >修复版本过低和验证码闪退补丁
        </h2>
        <p>
          下载<a
            target="_blank"
            rel="noopener"
            href="https://qqgame.qq.com/download.shtml"
            >QQ游戏</a
          >客户端, 然后在QQ游戏客户端文件夹里面找<a
            href="/downloads/code/QQTang/SSOCommon.dll"
            >SSOCommon.dll</a
          >,
          <a href="/downloads/code/QQTang/SSOPlatform.dll">SSOPlatform.dll</a>,
          或者你也可以直接下载我提取好的.
          我们可以在我们的DLL用<code>LoadLibraryW</code>加载这两个DLL文件.
          修改<code>zlib1.c</code>然后重新生成<code>zlib1.dll</code>把他和<code>SSOCommon.dll</code>,
          <code>SSOPlatform.dll</code
          >一起复制到QQ堂根目录下面就能解决版本过低和验证码闪退的问题.
        </p>
        <h2 id="创建窗口">
          <a href="#创建窗口" class="headerlink" title="创建窗口"></a>创建窗口
        </h2>
        <p>我们需要创建一个新的进程用来维持一个独立的图形化界面, 具体看代码</p>
        <figure class="highlight c">
          <figcaption>
            <span>zlib1.c</span
            ><a href="/downloads/code/QQTang/zlib1.c">view raw</a>
          </figcaption>
          <table>
            <tr>
              <td class="gutter">
                <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br></pre>
              </td>
              <td class="code">
                <pre><span class="line">HWND <span class="title function_">FindHandleToQQTangWindow</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    HWND HandleToQQTangWindow = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; HandleToQQTangWindow == <span class="literal">NULL</span> &amp;&amp; i &lt; <span class="number">60</span>; i++)</span><br><span class="line">    {</span><br><span class="line">        Sleep(<span class="number">1000</span>);</span><br><span class="line">        HandleToQQTangWindow = FindWindowW( <span class="comment">// For more information, see https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-findwindoww</span></span><br><span class="line">            <span class="string">L&quot;QQTangWinClass&quot;</span>,              <span class="comment">// lpClassName: The class name or a class atom created by a previous call to the RegisterClass or RegisterClassEx function. The atom must be in the low-order word of lpClassName; the high-order word must be zero. If lpClassName points to a string, it specifies the window class name. The class name can be any name registered with RegisterClass or RegisterClassEx, or any of the predefined control-class names. If lpClassName is NULL, it finds any window whose title matches the lpWindowName parameter.</span></span><br><span class="line">            <span class="string">L&quot;QQ堂 5.2 Beta1 Build1 &quot;</span>       <span class="comment">// lpWindowName: The window name (the window&#x27;s title). If this parameter is NULL, all window names match.</span></span><br><span class="line">        );</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> HandleToQQTangWindow;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">GetQQTangCheatWindowScreenCoordinates</span><span class="params">(IN <span class="type">const</span> HWND HandleToParentWindow, OUT LPPOINT PointerToQQTangCheatWindowScreenCoordinates)</span></span><br><span class="line">{</span><br><span class="line">    PointerToQQTangCheatWindowScreenCoordinates-&gt;x = <span class="number">-200</span>;</span><br><span class="line">    PointerToQQTangCheatWindowScreenCoordinates-&gt;y = <span class="number">0</span>;</span><br><span class="line">    MapWindowPoints(                                 <span class="comment">// // For more information, see https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-mapwindowpoints</span></span><br><span class="line">        HandleToParentWindow,                        <span class="comment">// hWndFrom: A handle to the window from which points are converted. If this parameter is NULL or HWND_DESKTOP, the points are presumed to be in screen coordinates.</span></span><br><span class="line">        HWND_DESKTOP,                                <span class="comment">// hWndTo: A handle to the window to which points are converted. If this parameter is NULL or HWND_DESKTOP, the points are converted to screen coordinates.</span></span><br><span class="line">        PointerToQQTangCheatWindowScreenCoordinates, <span class="comment">// lpPoints: A pointer to an array of POINT structures that contain the set of points to be converted. The points are in device units. This parameter can also point to a RECT structure, in which case the cPoints parameter should be set to 2.</span></span><br><span class="line">        <span class="number">1</span>                                            <span class="comment">// cPoints: The number of POINT structures in the array pointed to by the lpPoints parameter.</span></span><br><span class="line">    );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">LRESULT CALLBACK <span class="title function_">MainUIWindowProc</span><span class="params">( <span class="comment">// For more information, see https://docs.microsoft.com/en-us/windows/win32/api/winuser/nc-winuser-wndproc and https://docs.microsoft.com/en-us/windows/win32/winmsg/window-procedures.</span></span></span><br><span class="line"><span class="params">    IN HWND hWnd,                  <span class="comment">// A handle to the window. This parameter is typically named hWnd.</span></span></span><br><span class="line"><span class="params">    IN UINT uMsg,                  <span class="comment">// The message. This parameter is typically named uMsg. For lists of the system-provided messages, see System-defined messages https://docs.microsoft.com/en-us/windows/win32/winmsg/about-messages-and-message-queues#system-defined-messages.</span></span></span><br><span class="line"><span class="params">    IN WPARAM wParam,              <span class="comment">// Additional message information. This parameter is typically named wParam. The contents of the wParam parameter depend on the value of the uMsg parameter.</span></span></span><br><span class="line"><span class="params">    IN LPARAM lParam               <span class="comment">// Additional message information. This parameter is typically named lParam. The contents of the lParam parameter depend on the value of the uMsg parameter.</span></span></span><br><span class="line"><span class="params">)</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">static</span> <span class="type">const</span> LPCWSTR GREETING_MESSAGE = <span class="string">L&quot;QQ堂助手已成功启动&quot;</span>;</span><br><span class="line">    PAINTSTRUCT ps; <span class="comment">// For more information, see https://docs.microsoft.com/en-us/windows/win32/api/winuser/ns-winuser-paintstruct</span></span><br><span class="line">    HDC hdc;</span><br><span class="line">    <span class="keyword">switch</span> (uMsg)</span><br><span class="line">    {</span><br><span class="line">    <span class="keyword">case</span> WM_PAINT:        <span class="comment">// The application receives the WM_PAINT message when part of its displayed window must be updated. The event can occur when a user moves a window in front of your window, then moves it away again. Your application doesn&#x27;t know when these events occur. Only Windows knows, so it notifies your app with a WM_PAINT message. When the window is first displayed, all of it must be updated. To handle a WM_PAINT message, first call BeginPaint, then handle all the logic to lay out the text, buttons, and other controls in the window, and then call EndPaint. HDC in the code is a handle to a device context, which is used to draw in the window&#x27;s client area. Use the BeginPaint and EndPaint functions to prepare for and complete the drawing in the client area. BeginPaint returns a handle to the display device context used for drawing in the client area; EndPaint ends the paint request and releases the device context.</span></span><br><span class="line">        hdc = BeginPaint( <span class="comment">// For more information, see https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-beginpaint</span></span><br><span class="line">            hWnd,         <span class="comment">// hWnd: Handle to the window to be repainted.</span></span><br><span class="line">            &amp;ps           <span class="comment">// lpPaint: Pointer to the PAINTSTRUCT structure that will receive painting information.</span></span><br><span class="line">        );</span><br><span class="line">        TextOutW(                      <span class="comment">// For more information, see https://docs.microsoft.com/en-us/windows/win32/api/wingdi/nf-wingdi-textoutw</span></span><br><span class="line">            hdc,                       <span class="comment">// hdc: A handle to the device context.</span></span><br><span class="line">            <span class="number">5</span>,                         <span class="comment">//  x: The x-coordinate, in logical coordinates, of the reference point that the system uses to align the string.</span></span><br><span class="line">            <span class="number">5</span>,                         <span class="comment">// y: The y-coordinate, in logical coordinates, of the reference point that the system uses to align the string.</span></span><br><span class="line">            GREETING_MESSAGE,          <span class="comment">// lpString: A pointer to the string to be drawn. The string does not need to be zero-terminated, because cchString specifies the length of the string.</span></span><br><span class="line">            lstrlenW(GREETING_MESSAGE) <span class="comment">// c: The length of the string pointed to by lpString, in characters.</span></span><br><span class="line">        );</span><br><span class="line">        EndPaint( <span class="comment">// For more information, see https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-endpaint</span></span><br><span class="line">            hWnd, <span class="comment">// hWnd: Handle to the window that has been repainted.</span></span><br><span class="line">            &amp;ps   <span class="comment">// lpPaint: Pointer to a PAINTSTRUCT structure that contains the painting information retrieved by BeginPaint.</span></span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> WM_DESTROY:     <span class="comment">// The application receives the WM_DESTROY message when the window is closed. We use PostQuitMessage to indicate to the system that a thread has made a request to terminate (quit).</span></span><br><span class="line">        PostQuitMessage( <span class="comment">// For more information, see https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-postquitmessage</span></span><br><span class="line">            <span class="number">0</span>            <span class="comment">// nExitCode: The application exit code. This value is used as the wParam parameter of the WM_QUIT message.</span></span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:                   <span class="comment">// An application typically handles many other messages, we calls the default window procedure to provide default processing for any window messages that an application does not process. This function ensures that every message is processed.</span></span><br><span class="line">        <span class="keyword">return</span> DefWindowProcW( <span class="comment">// For more information, see https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-defwindowprocw</span></span><br><span class="line">            hWnd,              <span class="comment">// hWnd: A handle to the window procedure that received the message.</span></span><br><span class="line">            uMsg,              <span class="comment">// uMsg: The message.</span></span><br><span class="line">            wParam,            <span class="comment">// wParam: Additional message information. The content of this parameter depends on the value of the Msg parameter.</span></span><br><span class="line">            lParam             <span class="comment">// lParam: Additional message information. The content of this parameter depends on the value of the Msg parameter.</span></span><br><span class="line">        );</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">DWORD <span class="title function_">ShowQQTangCheatWindow</span><span class="params">(<span class="type">const</span> HINSTANCE HandleToInstanceWindowOwner, <span class="type">const</span> HWND HandleToParentWindow)</span></span><br><span class="line">{</span><br><span class="line">    <span class="comment">// For more information of how to write a traditional Windows Desktop application, see https://docs.microsoft.com/en-us/cpp/windows/walkthrough-creating-windows-desktop-applications-cpp?view=msvc-170 and https://docs.microsoft.com/en-us/windows/win32/learnwin32/creating-a-window</span></span><br><span class="line"></span><br><span class="line">    <span class="type">static</span> <span class="type">const</span> LPCWSTR MainUIWindowClassName = <span class="string">L&quot;MyQQTangCheatWindowClass&quot;</span>;</span><br><span class="line">    <span class="type">static</span> <span class="type">const</span> <span class="type">int</span> QQTangCheatWindowWidht = <span class="number">200</span>;</span><br><span class="line">    <span class="type">static</span> <span class="type">const</span> <span class="type">int</span> QQTangCheatWindowHeight = <span class="number">600</span>;</span><br><span class="line"></span><br><span class="line">    WNDCLASSEXW MainUIWindowClass; <span class="comment">// For more information, see https://docs.microsoft.com/en-us/windows/win32/api/winuser/ns-winuser-wndclassexw</span></span><br><span class="line"></span><br><span class="line">    HICON MainUIWindowClassAppIcon = LoadIconW( <span class="comment">// For more information, see https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-loadiconw</span></span><br><span class="line">        <span class="literal">NULL</span>,                                   <span class="comment">// hInstance: A handle to an instance of the module whose executable file contains the icon to be loaded. This parameter must be NULL when a standard icon is being loaded.</span></span><br><span class="line">        (LPCWSTR)IDI_APPLICATION                <span class="comment">// lpIconName: The name of the icon resource to be loaded. Alternatively, this parameter can contain the resource identifier in the low-order word and zero in the high-order word. Use the https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-makeintresourcea macro to create this value. To use one of the predefined icons, set the hInstance parameter to NULL.</span></span><br><span class="line">    );</span><br><span class="line">    HCURSOR MainUIWindowClassAppCursor = LoadCursorW( <span class="comment">// For more information, see https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-loadcursorw</span></span><br><span class="line">        <span class="literal">NULL</span>,                                         <span class="comment">// hInstance: A handle to an instance of the module whose executable file contains the cursor to be loaded.</span></span><br><span class="line">        (LPCWSTR)IDC_ARROW                            <span class="comment">// lpCursorName: The name of the cursor resource to be loaded. Alternatively, this parameter can consist of the resource identifier in the low-order word and zero in the high-order word. The MAKEINTRESOURCE macro can also be used to create this value. To use one of the predefined cursors, the application must set the hInstance parameter to NULL</span></span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1. You populate a structure of type WNDCLASSEX. The structure contains information about the window: the application icon, the background color of the window, the name to display in the title bar, among other things. Importantly, it contains a function pointer to your window procedure.</span></span><br><span class="line">    MainUIWindowClass.cbSize = <span class="keyword">sizeof</span>(WNDCLASSEX);                  <span class="comment">// The size, in bytes, of this structure. Set this member to sizeof(WNDCLASSEX). Be sure to set this member before calling the GetClassInfoEx function.</span></span><br><span class="line">    MainUIWindowClass.style = CS_DBLCLKS | CS_HREDRAW | CS_VREDRAW; <span class="comment">// The class style(s). This member can be any combination of the Class Styles. For a list of possible values, see https://docs.microsoft.com/en-us/windows/win32/winmsg/window-class-styles</span></span><br><span class="line">    MainUIWindowClass.lpfnWndProc = MainUIWindowProc;               <span class="comment">// A pointer to the window procedure. You must use the CallWindowProc function to call the window procedure.</span></span><br><span class="line">    MainUIWindowClass.cbClsExtra = <span class="number">0</span>;                               <span class="comment">// The number of extra bytes to allocate following the window-class structure. The system initializes the bytes to zero.</span></span><br><span class="line">    MainUIWindowClass.cbWndExtra = <span class="number">0</span>;                               <span class="comment">// The number of extra bytes to allocate following the window instance. The system initializes the bytes to zero. If an application uses WNDCLASSEX to register a dialog box created by using the CLASS directive in the resource file, it must set this member to DLGWINDOWEXTRA.</span></span><br><span class="line">    MainUIWindowClass.hInstance = HandleToInstanceWindowOwner;      <span class="comment">// A handle to the instance that contains the window procedure for the class.</span></span><br><span class="line">    MainUIWindowClass.hIcon = MainUIWindowClassAppIcon;             <span class="comment">// A handle to the class icon. This member must be a handle to an icon resource. If this member is NULL, the system provides a default icon.</span></span><br><span class="line">    MainUIWindowClass.hCursor = MainUIWindowClassAppCursor;         <span class="comment">// A handle to the class cursor. This member must be a handle to a cursor resource. If this member is NULL, an application must explicitly set the cursor shape whenever the mouse moves into the application&#x27;s window. For more information, see https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-loadcursorw</span></span><br><span class="line">    MainUIWindowClass.hbrBackground = (HBRUSH)COLOR_BACKGROUND;     <span class="comment">// A handle to the class background brush. This member can be a handle to the brush to be used for painting the background, or it can be a color value. A color value must be one of the following standard system colors (the value 1 must be added to the chosen color).</span></span><br><span class="line">    MainUIWindowClass.lpszMenuName = <span class="literal">NULL</span>;                          <span class="comment">// Pointer to a null-terminated character string that specifies the resource name of the class menu, as the name appears in the resource file. If you use an integer to identify the menu, use the MAKEINTRESOURCE macro. If this member is NULL, windows belonging to this class have no default menu.</span></span><br><span class="line">    MainUIWindowClass.lpszClassName = MainUIWindowClassName;        <span class="comment">// A pointer to a null-terminated string or is an atom. If this parameter is an atom, it must be a class atom created by a previous call to the RegisterClass or RegisterClassEx function. The atom must be in the low-order word of lpszClassName; the high-order word must be zero. If lpszClassName is a string, it specifies the window class name. The class name can be any name registered with RegisterClass or RegisterClassEx, or any of the predefined control-class names. The maximum length for lpszClassName is 256. If lpszClassName is greater than the maximum length, the RegisterClassEx function will fail.</span></span><br><span class="line">    MainUIWindowClass.hIconSm = MainUIWindowClassAppIcon;           <span class="comment">// A handle to a small icon that is associated with the window class. If this member is NULL, the system searches the icon resource specified by the hIcon member for an icon of the appropriate size to use as the small icon.</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. Register the WNDCLASSEX with Windows so that it knows about your window and how to send messages to it. Use the RegisterClassEx function and pass the window class structure as an argument.</span></span><br><span class="line">    <span class="type">const</span> ATOM MainUIWindowAtom = RegisterClassExW(&amp;MainUIWindowClass); <span class="comment">// For more information, see https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-registerclassexw</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. You then create a window with relative position to parent window</span></span><br><span class="line">    POINT QQTangCheatWindowScreenCoordinates;</span><br><span class="line">    GetQQTangCheatWindowScreenCoordinates(HandleToParentWindow, &amp;QQTangCheatWindowScreenCoordinates);</span><br><span class="line">    <span class="type">const</span> HWND HandleToMainUIWindow = CreateWindowExW( <span class="comment">// For more information, see https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-createwindowexw</span></span><br><span class="line">        WS_EX_LEFT,                                    <span class="comment">// dwExStyle: The extended window style of the window being created. For a list of possible values, see https://docs.microsoft.com/en-us/windows/win32/winmsg/extended-window-styles</span></span><br><span class="line">        MainUIWindowClassName,                         <span class="comment">// lpClassName: A null-terminated string or a class atom created by a previous call to the RegisterClass or RegisterClassEx function. The atom must be in the low-order word of lpClassName; the high-order word must be zero. If lpClassName is a string, it specifies the window class name. The class name can be any name registered with RegisterClass or RegisterClassEx, provided that the module that registers the class is also the module that creates the window. The class name can also be any of the predefined system class names.</span></span><br><span class="line">        <span class="string">L&quot;QQ堂游戏助手&quot;</span>,                               <span class="comment">// lpWindowName: The window name. If the window style specifies a title bar, the window title pointed to by lpWindowName is displayed in the title bar. When using CreateWindow to create controls, such as buttons, check boxes, and static controls, use lpWindowName to specify the text of the control. When creating a static control with the SS_ICON style, use lpWindowName to specify the icon name or identifier. To specify an identifier, use the syntax &quot;#num&quot;.</span></span><br><span class="line">        WS_POPUP | WS_CAPTION,                         <span class="comment">// dwStyle: The style of the window being created. This parameter can be a combination of the window style values, plus the control styles indicated in the Remarks section. For a list of possible values, see https://docs.microsoft.com/en-us/windows/win32/winmsg/window-styles. For more information, see https://docs.microsoft.com/en-us/windows/win32/winmsg/window-features.</span></span><br><span class="line">        QQTangCheatWindowScreenCoordinates.x,          <span class="comment">// X: The initial horizontal position of the window. For an overlapped or pop-up window, the x parameter is the initial x-coordinate of the window&#x27;s upper-left corner, in screen coordinates. For a child window, x is the x-coordinate of the upper-left corner of the window relative to the upper-left corner of the parent window&#x27;s client area. If x is set to CW_USEDEFAULT, the system selects the default position for the window&#x27;s upper-left corner and ignores the y parameter. CW_USEDEFAULT is valid only for overlapped windows; if it is specified for a pop-up or child window, the x and y parameters are set to zero.</span></span><br><span class="line">        QQTangCheatWindowScreenCoordinates.y,          <span class="comment">// Y: The initial vertical position of the window. For an overlapped or pop-up window, the y parameter is the initial y-coordinate of the window&#x27;s upper-left corner, in screen coordinates. For a child window, y is the initial y-coordinate of the upper-left corner of the child window relative to the upper-left corner of the parent window&#x27;s client area. For a list box y is the initial y-coordinate of the upper-left corner of the list box&#x27;s client area relative to the upper-left corner of the parent window&#x27;s client area. If an overlapped window is created with the WS_VISIBLE style bit set and the x parameter is set to CW_USEDEFAULT, then the y parameter determines how the window is shown. If the y parameter is CW_USEDEFAULT, then the window manager calls ShowWindow with the SW_SHOW flag after the window has been created. If the y parameter is some other value, then the window manager calls ShowWindow with that value as the nCmdShow parameter.</span></span><br><span class="line">        QQTangCheatWindowWidht,                        <span class="comment">// nWidth: The width, in device units, of the window. For overlapped windows, nWidth is the window&#x27;s width, in screen coordinates, or CW_USEDEFAULT. If nWidth is CW_USEDEFAULT, the system selects a default width and height for the window; the default width extends from the initial x-coordinates to the right edge of the screen; the default height extends from the initial y-coordinate to the top of the icon area. CW_USEDEFAULT is valid only for overlapped windows; if CW_USEDEFAULT is specified for a pop-up or child window, the nWidth and nHeight parameter are set to zero.</span></span><br><span class="line">        QQTangCheatWindowHeight,                       <span class="comment">// nHeight: The height, in device units, of the window. For overlapped windows, nHeight is the window&#x27;s height, in screen coordinates. If the nWidth parameter is set to CW_USEDEFAULT, the system ignores nHeight.</span></span><br><span class="line">        HandleToParentWindow,                          <span class="comment">// hWndParent: A handle to the parent or owner window of the window being created. To create a child window or an owned window, supply a valid window handle. This parameter is optional for pop-up windows. To create a message-only window, supply HWND_MESSAGE or a handle to an existing message-only window.</span></span><br><span class="line">        <span class="literal">NULL</span>,                                          <span class="comment">// hMenu: A handle to a menu, or specifies a child-window identifier, depending on the window style. For an overlapped or pop-up window, hMenu identifies the menu to be used with the window; it can be NULL if the class menu is to be used. For a child window, hMenu specifies the child-window identifier, an integer value used by a dialog box control to notify its parent about events. The application determines the child-window identifier; it must be unique for all child windows with the same parent window.</span></span><br><span class="line">        HandleToInstanceWindowOwner,                   <span class="comment">// hInstance: A handle to the instance of the module to be associated with the window.</span></span><br><span class="line">        <span class="literal">NULL</span>                                           <span class="comment">// lpParam: Pointer to a value to be passed to the window through the CREATESTRUCT structure (lpCreateParams member) pointed to by the lParam param of the WM_CREATE message. This message is sent to the created window by this function before it returns. If an application calls CreateWindow to create a MDI client window, lpParam should point to a CLIENTCREATESTRUCT structure. If an MDI client window calls CreateWindow to create an MDI child window, lpParam should point to a MDICREATESTRUCT structure. lpParam may be NULL if no additional data is needed.</span></span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4. At this point, the window has been created, but we still need to tell Windows to make it visible.</span></span><br><span class="line">    ShowWindow(               <span class="comment">// For more information, see https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-showwindow</span></span><br><span class="line">        HandleToMainUIWindow, <span class="comment">// hWnd: A handle to the window.</span></span><br><span class="line">        SW_SHOWNORMAL         <span class="comment">// nCmdShow: Controls how the window is to be shown. This parameter is ignored the first time an application calls ShowWindow, if the program that launched the application provides a STARTUPINFO structure. Otherwise, the first time ShowWindow is called, the value should be the value obtained by the WinMain function in its nCmdShow parameter. In subsequent calls, this parameter can be one of the following values.</span></span><br><span class="line">    );</span><br><span class="line">    UpdateWindow(HandleToMainUIWindow); <span class="comment">// The UpdateWindow function updates the client area of the specified window by sending a WM_PAINT message to the window if the window&#x27;s update region is not empty. The function sends a WM_PAINT message directly to the window procedure of the specified window, bypassing the application queue. If the update region is empty, no message is sent. For more information, see https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-updatewindow</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 5. The displayed window isn&#x27;t yet handling the messages that Windows is now sending to it. To handle the messages, we first add a message loop to listen for the messages that Windows sends. When the application receives a message, this loop dispatches it to your WndProc function to be handled. The message loop resembles the following code.</span></span><br><span class="line">    MSG msg;</span><br><span class="line">    <span class="keyword">while</span> (</span><br><span class="line">        GetMessageW( <span class="comment">// For more information, see https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-getmessagew</span></span><br><span class="line">            &amp;msg,    <span class="comment">// lpMsg: A pointer to an MSG structure that receives message information from the thread&#x27;s message queue. For more information, see https://docs.microsoft.com/en-us/windows/win32/api/winuser/ns-winuser-msg</span></span><br><span class="line">            <span class="literal">NULL</span>,    <span class="comment">// hWnd: A handle to the window whose messages are to be retrieved. The window must belong to the current thread. If hWnd is NULL, GetMessage retrieves messages for any window that belongs to the current thread, and any messages on the current thread&#x27;s message queue whose hwnd value is NULL (see the MSG structure). Therefore if hWnd is NULL, both window messages and thread messages are processed. If hWnd is -1, GetMessage retrieves only messages on the current thread&#x27;s message queue whose hwnd value is NULL, that is, thread messages as posted by PostMessage (when the hWnd parameter is NULL) or PostThreadMessage.</span></span><br><span class="line">            <span class="number">0</span>,       <span class="comment">// wMsgFilterMin: The integer value of the lowest message value to be retrieved. Use WM_KEYFIRST (0x0100) to specify the first keyboard message or WM_MOUSEFIRST (0x0200) to specify the first mouse message. Use WM_INPUT here and in wMsgFilterMax to specify only the WM_INPUT messages. If wMsgFilterMin and wMsgFilterMax are both zero, GetMessage returns all available messages (that is, no range filtering is performed).</span></span><br><span class="line">            <span class="number">0</span>        <span class="comment">// wMsgFilterMax: The integer value of the highest message value to be retrieved. Use WM_KEYLAST to specify the last keyboard message or WM_MOUSELAST to specify the last mouse message. Use WM_INPUT here and in wMsgFilterMin to specify only the WM_INPUT messages. If wMsgFilterMin and wMsgFilterMax are both zero, GetMessage returns all available messages (that is, no range filtering is performed).</span></span><br><span class="line">            ))</span><br><span class="line">    {</span><br><span class="line">        TranslateMessage( <span class="comment">// For more information, see https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-translatemessage</span></span><br><span class="line">            &amp;msg          <span class="comment">// lpMsg: A pointer to an MSG structure that contains message information retrieved from the calling thread&#x27;s message queue by using the GetMessage or PeekMessage function.</span></span><br><span class="line">        );</span><br><span class="line">        DispatchMessageW( <span class="comment">// For more information, see https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-dispatchmessagew</span></span><br><span class="line">            &amp;msg          <span class="comment">// lpMsg: A pointer to a structure that contains the message.</span></span><br><span class="line">        );</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 6. Release all the GUI resources after GetMessageW receive WM_QUIT message.</span></span><br><span class="line">    UnregisterClassW(MainUIWindowClassName, HandleToInstanceWindowOwner); <span class="comment">// For more information, see https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-unregisterclassw</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> msg.wParam;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">DWORD WINAPI <span class="title function_">ThreadProc</span><span class="params">( <span class="comment">// For more information, see https://docs.microsoft.com/en-us/previous-versions/windows/desktop/legacy/ms686736(v=vs.85)</span></span></span><br><span class="line"><span class="params">    IN LPVOID lpParam    <span class="comment">// The thread data passed to the function using the lpParameter parameter of the CreateThread, CreateRemoteThread, or CreateRemoteThreadEx function.</span></span></span><br><span class="line"><span class="params">)</span></span><br><span class="line">{</span><br><span class="line">    DWORD ExitCode = <span class="number">-1</span>;</span><br><span class="line">    <span class="type">const</span> HINSTANCE HandleToInstanceThisDLL = *((HINSTANCE *)lpParam);</span><br><span class="line">    <span class="keyword">if</span> (HandleToInstanceThisDLL == <span class="literal">NULL</span>)</span><br><span class="line">    {</span><br><span class="line">        MessageBoxW(<span class="literal">NULL</span>, <span class="string">L&quot;当前DLL句柄是无效的&quot;</span>, <span class="literal">NULL</span>, MB_OK);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    {</span><br><span class="line">        HMODULE HandleToModuleThisDLL;</span><br><span class="line">        <span class="keyword">if</span> (GetModuleHandleExW(                         <span class="comment">// For more information, see https://docs.microsoft.com/en-us/windows/win32/api/libloaderapi/nf-libloaderapi-getmodulehandleexw</span></span><br><span class="line">                GET_MODULE_HANDLE_EX_FLAG_FROM_ADDRESS, <span class="comment">// dwFlags: This parameter can be zero or one or more of the following values. If the module&#x27;s reference count is incremented, the caller must use the FreeLibrary function to decrement the reference count when the module handle is no longer needed.</span></span><br><span class="line">                (LPCWSTR)HandleToInstanceThisDLL,       <span class="comment">// lpModuleName: The name of the loaded module (either a .dll or .exe file), or an address in the module (if dwFlags is GET_MODULE_HANDLE_EX_FLAG_FROM_ADDRESS).</span></span><br><span class="line">                &amp;HandleToModuleThisDLL                  <span class="comment">// phModule: A handle to the specified module. If the function fails, this parameter is NULL.</span></span><br><span class="line">                ))</span><br><span class="line">        {</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Calling LoadLibrary within DllMain can cause a deadlock or a crash and are discouraged by Miscrosoft DLL best practices https://docs.microsoft.com/en-us/windows/win32/dlls/dynamic-link-library-best-practices, so we call it inside of a new thread.</span></span><br><span class="line">            <span class="type">const</span> HMODULE HandleToModuleSSOCommon = LoadLibraryW(<span class="string">L&quot;.\\SSOCommon.dll&quot;</span>); <span class="comment">// For more information, see https://docs.microsoft.com/en-us/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibraryw</span></span><br><span class="line">            <span class="keyword">if</span> (HandleToModuleSSOCommon == <span class="literal">NULL</span>)</span><br><span class="line">            {</span><br><span class="line">                MessageBoxW(<span class="literal">NULL</span>, <span class="string">L&quot;无法加载SSOCommon.dll&quot;</span>, <span class="literal">NULL</span>, MB_OK);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            {</span><br><span class="line">                <span class="type">const</span> HMODULE HandleToModuleSSOPlatform = LoadLibraryW(<span class="string">L&quot;.\\SSOPlatform.dll&quot;</span>);</span><br><span class="line">                <span class="keyword">if</span> (HandleToModuleSSOPlatform == <span class="literal">NULL</span>)</span><br><span class="line">                {</span><br><span class="line">                    MessageBoxW(<span class="literal">NULL</span>, <span class="string">L&quot;无法加载SSOPlatform.dll&quot;</span>, <span class="literal">NULL</span>, MB_OK);</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                {</span><br><span class="line">                    <span class="type">const</span> HWND HandleToQQTangWindow = FindHandleToQQTangWindow();</span><br><span class="line">                    <span class="keyword">if</span> (HandleToQQTangWindow == <span class="literal">NULL</span>)</span><br><span class="line">                    {</span><br><span class="line">                        MessageBoxW(<span class="literal">NULL</span>, <span class="string">L&quot;没找到QQ堂的窗口句柄&quot;</span>, <span class="literal">NULL</span>, MB_OK);</span><br><span class="line">                    }</span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                    {</span><br><span class="line">                        ExitCode = ShowQQTangCheatWindow(HandleToInstanceThisDLL, HandleToQQTangWindow);</span><br><span class="line">                    }</span><br><span class="line">                    FreeLibrary(HandleToModuleSSOPlatform);</span><br><span class="line">                }</span><br><span class="line">                FreeLibrary(HandleToModuleSSOCommon); <span class="comment">// For more information, see https://docs.microsoft.com/en-us/windows/win32/api/libloaderapi/nf-libloaderapi-freelibrary</span></span><br><span class="line">            }</span><br><span class="line">            <span class="comment">// We need to ensure DLL is released after the thread has finished. For more information, see https://stackoverflow.com/a/39245021/9980245</span></span><br><span class="line">            FreeLibraryAndExitThread(  <span class="comment">// For more information, see https://docs.microsoft.com/en-us/windows/win32/api/libloaderapi/nf-libloaderapi-freelibraryandexitthread</span></span><br><span class="line">                HandleToModuleThisDLL, <span class="comment">// hLibModule: A handle to the DLL module whose reference count the function decrements. The LoadLibrary or GetModuleHandleEx function returns this handle.</span></span><br><span class="line">                ExitCode               <span class="comment">// dwExitCode: The exit code for the calling thread.</span></span><br><span class="line">            );</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        {</span><br><span class="line">            MessageBoxW(<span class="literal">NULL</span>, <span class="string">L&quot;无法增加当前DLL引用计数&quot;</span>, <span class="literal">NULL</span>, MB_OK);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ExitCode;</span><br><span class="line">}</span><br></pre>
              </td>
            </tr>
          </table>
        </figure>

        <h2 id="下载商城资源">
          <a href="#下载商城资源" class="headerlink" title="下载商城资源"></a
          >下载商城资源
        </h2>
        <p>
          QQ堂的商城资源保存在服务端<code>http://qqt-img.qq.com/item/ItemZips/&lt;资源类别&gt;/&lt;资源类别&gt;&lt;资源id&gt;.zip</code>.
          资源类别和资源id可以在<code>object/itemCFG.pyc</code>和<code>object/commodityCFG.pyc</code>中找到.
          运行我写的脚本<a
            target="_blank"
            rel="noopener"
            href="https://gist.github.com/vitaminac/76682c7f9a065566d213bd46c849bdec"
            >实现</a
          >.
        </p>
        <pre><code>mkdir -p script
git clone https://gist.github.com/76682c7f9a065566d213bd46c849bdec.git script
conda create --no-default-packages -n QQT python=3.8.12
conda activate QQT
conda install aiohttp
cd script
python QQTResourceDownload.py
</code></pre>
        <h3 id="反编译pyc">
          <a href="#反编译pyc" class="headerlink" title="反编译pyc"></a
          >反编译pyc
        </h3>
        <p>
          安装<a
            target="_blank"
            rel="noopener"
            href="https://github.com/rocky/python-uncompyle6"
            >uncompyle6</a
          >
        </p>
        <pre><code>pip install uncompyle6
</code></pre>
        <p>然后运行<code>uncompyle6</code>反编译<code>pyc</code>文件</p>
        <pre><code>FOR /R %f IN (*.pyc) DO (uncompyle6 -o . --encoding gbk %f)
</code></pre>
        <p>
          <code>uncompyle6</code
          >可能会反编译注释的时候出错因为QQ堂源文件是<code>gbk</code>编码的,需要修改一些<code>uncompyle6</code>源码,在这<a
            target="_blank"
            rel="noopener"
            href="https://github.com/rocky/python-uncompyle6/blob/e2ff9096031ea50fb0fc3a6f3a56c179fbd4ac3b/uncompyle6/semantics/helper.py#L155"
            >一段</a
          >之前添加一行<code>docstring = docstring.decode(&quot;gbk&quot;)</code
          >. 即使反编译出来,源码不一定能直接用,需要手动修改,
          需要一些的Python的知识.
          例如可能会有编码的问题以及一些在最新版本的Python会出现语法不支持.
        </p>
        <h2 id="反编译QQ堂地图编辑器">
          <a
            href="#反编译QQ堂地图编辑器"
            class="headerlink"
            title="反编译QQ堂地图编辑器"
          ></a
          >反编译QQ堂地图编辑器
        </h2>
        <p>
          安装Python2.5然后安装unpy2exe然后把把exe转换成pyc文件.反编译的主要难题是Python2.5版本太老了,安装不了pip文件,需要手动修改pip的源码,很多依赖也要手动安装,要找支持对应Python版本的依赖,有些可能根本没有或者太老了.我猜测QQ堂本身也可以被反编译的,不过可能要安装更老版的Python例如2.2版本.
        </p>
        <h2 id="参考">
          <a href="#参考" class="headerlink" title="参考"></a>参考
        </h2>
        <ul>
          <li>
            <a
              target="_blank"
              rel="noopener"
              href="https://mp.weixin.qq.com/s/DdEpDFn3sen7Jb3rU-K3iA"
              >火拼QQ堂穿墙功能的挖掘</a
            >
          </li>
          <li>
            <a
              target="_blank"
              rel="noopener"
              href="https://blog.csdn.net/laixicheng/article/details/108062170"
              >对某游戏功能实现的逆向分析及实现变态功能</a
            >
          </li>
          <li>
            <a target="_blank" rel="noopener" href="http://www.445e.com/b-28"
              >缘来社区 - QQ堂板块</a
            >
          </li>
          <li>
            <a target="_blank" rel="noopener" href="http://www.2wyu.com/f13"
              >网悠社区 - QQ堂板块</a
            >
          </li>
        </ul>
      </div>
    </article>
    <!-- Custom Theme JavaScript -->
    <script type="text/javascript" src="/js/blog.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js"></script>
    <script>
      $(document).ready(function () {
        anchors.add("p");
      });
    </script>

    <!-- jquery.tagcloud.js -->
    <script>
      // only load tagcloud.js in tag.html
      if ($("#tag_cloud").length !== 0) {
        async("https://vitaminac.github.io/js/jquery.tagcloud.js", function () {
          $.fn.tagcloud.defaults = {
            //size: {start: 1, end: 1, unit: 'em'},
            color: {
              start: "#bbbbee",
              end: "#0085a1",
            },
          };
          $("#tag_cloud a").tagcloud();
        });
      }
    </script>

    <script type="text/javascript" src="/js/common.js"></script>

    <!-- render ipynb file -->

    <!-- render ipynb file -->
  </body>
</html>
